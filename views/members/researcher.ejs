<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>DSEM Lab.</title>
    <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
    <link href="/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <link href="/css/AdminLTE.css" rel="stylesheet" type="text/css" />
    <script src="/js/iconify.min.js"></script>
    <script src="/js/jquery.min.js"></script>
    <script src="/js/jquery-ui-1.10.3.min.js" type="text/javascript"></script>
    <script src="/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="/js/AdminLTE/app_homepage.js" type="text/javascript"></script>
    <script src="/js/function.js"></script>
    <script src="https://use.fontawesome.com/releases/v5.15.4/js/all.js" data-auto-a11y="true"></script>
    <script>
        $(document).ready(function() {
            $("#login-form").keypress(function (e) {
                if(e.keyCode == 13) {
                    login();
                }
            });
    });
    </script>
    <!-- 삭제할 때 테이블의 해당 행 삭제되어 보이도록 함 -->
    <script>
        $(document).ready(function() {
            function rowDel(obj) {
                var Del_tr = obj.parentNode.parentNode.parentNode;
                console.log(Del_tr);
                Del_tr.parentNode.removeChild(Del_tr);
            }
        });
    </script>

    <!-- 수정할 때 테이블의 해당 행의 정보가 미리 input값으로 존재 -->
    <script>
    $(document).ready(function() {
        let memberInfo = [];
        $(".updateBtn").click(function () {
            var updateBtn = $(this);

            var tr = updateBtn.parent().parent().parent();
            var td = tr.children();

            td.each(function (i) {
                memberInfo[i] = td.eq(i).text().trim();
            })
            // $("input[name=number]").attr('value', memberInfo[0]);
            $('select.number option[value=' + memberInfo[0] +']').attr('selected', 'selected');
            $("input[name=name]").attr('value', memberInfo[1]);
            $("input[name=department]").attr('value', memberInfo[2]);
            $("input[name=Email]").attr('value', memberInfo[3]);
            $("input[name=yearOfAdmission]").attr('value', memberInfo[4]);
            $("input[name=researchTopics]").attr('value', memberInfo[5]);
            $("textarea[class=description]").text(memberInfo[6]);

            // hidden 타입 데이터
            $("input[name=beforeId]").attr('value', memberInfo[0]);
            $("input[name=beforeName]").attr('value', memberInfo[1]);
        });
    });
    </script>
    <!-- 스크롤 일정이하로 내려가면 위로가기 버튼 생성 -->
    <script>
        $(document).ready(function() {
            $(window).scroll(function() {
                if ($( this).scrollTop() > 200 ) {
                    $('.top').fadeIn();
                } else {
                    $('.top').fadeOut();
                }
            });
            $('.top').click( function() {
                $('html, body').animate({scrollTop : 0}, 400);
                return false;
            });
        });
    </script>
    <!-- <form> POST 메소드, <pre> 태그 엔터눌러도 제출되지  않도록 장치-->
    <script>
        $(document).ready(function() {
            $("input[name='description']").keydown(function() {
                if(event.keyCode === 13) {
                    event.preventDefault();
                }
            });
        });
    </script>
    <!-- 실적보기 클릭 시 해당 연구원이 들어간 논문리스트 리턴-->
    <script>

        function regularExpression(str) {
            //str = str.replace(/^,/,"");
            
            str = str.replace(/,{2,}/gi, ",");
            str = str.replace(".,",",");
            str = str.replace(/,/gi, ", ");
            
            return str;
        }
        
        function selectPerformance(name) {
            let performanceList = [];
            let journal_strArray = '<%=paper_results[0]%>'.split("^");
            let conference_strArray = '<%=paper_results[1]%>'.split("^");
            let IJ = [], DJ = [];
            let IC= [], DC = [];

            for(let i =0; i<journal_strArray.length; i++) {
                if(journal_strArray[i].includes(name)) {
                    if(journal_strArray[i].indexOf("IJ") != -1) {
                        journal_strArray[i] = journal_strArray[i].substring(journal_strArray[i].indexOf("IJ")+3, journal_strArray[i].length);
                        let journal_IJ = regularExpression(journal_strArray[i]);
                        IJ.push(journal_IJ);
                    } else if(journal_strArray[i].indexOf("DJ") != -1) {
                        journal_strArray[i] = journal_strArray[i].substring(journal_strArray[i].indexOf("DJ")+3, journal_strArray[i].length);
                        let journal_DJ = regularExpression(journal_strArray[i]);
                        DJ.push(journal_DJ); 
                    }
                }
            }
            
            
            for(let i =0; i<conference_strArray.length; i++) {
                if(conference_strArray[i].includes(name)) {
                    if(conference_strArray[i].indexOf("IC") != -1) {
                        conference_strArray[i] = conference_strArray[i].substring(conference_strArray[i].indexOf("IC")+3, conference_strArray[i].length);
                        let conference_IC = regularExpression(conference_strArray[i]);
                        IC.push(conference_IC);
                    } else if(conference_strArray[i].indexOf("DC") != -1) {
                        conference_strArray[i] = conference_strArray[i].substring(conference_strArray[i].indexOf("DC")+3, conference_strArray[i].length);
                        let conference_DC = regularExpression(conference_strArray[i]);
                        DC.push(conference_DC);
                    }
               }
            }
            
            performanceList.push(IJ);
            performanceList.push(DJ);
            performanceList.push(IC);
            performanceList.push(DC);
            if(IJ,DJ,IC,DC.length < 1) {
                return "연구실적이 없습니다."
            } else {
                return performanceList;
            }
        }
    </script>
    <script>
        $(document).ready(function() {
            var researcherName = [];
            var name = $('div .researcherName').text().replace(/(\s*)/g,"");
            var tmp = '';

            for(let i =0; i<name.length; i+=3) {
                tmp = name.substring(i, i+3);
                researcherName.push(tmp);
            }

            for(let i =0; i<researcherName.length; i++) {
                $(".memberName"+researcherName[i]).click(function () {
                    var performanceList = selectPerformance(researcherName[i]);
                    var target = $(".memberName"+researcherName[i]).text().replace(/(\s*)/g,"");
                    if(target == "실적보기") {
                        if(performanceList != "연구실적이 없습니다.") {
                            var performanceStr = "";
                            var tagStr = "<div class='all' style='border:1px solid;'>";
                            performanceStr += tagStr;
                            if(performanceList[0].length > 0) { // International Journal
                                var IJ_tag = "<div class= 'performance"+researcherName[i]+"'"+ "style='width: 1600px; height: auto; color: black;'><br><p style='font-size:20px;'>&bull;&nbsp;<strong>International Journal</strong></p></div>";
                                for(let i =0; i<performanceList[0].length; i++) {
                                    IJ_tag += "<h11>" +(i+1) + ". " + performanceList[0][i] +"<br></h11>";
                                }
                                performanceStr += IJ_tag;
                            }
                            if(performanceList[1].length > 0) {
                                var DJ_tag = "<div class= 'performance"+researcherName[i]+"'"+ "style='width: 1600px; height: auto; color: black;'><br><p style='font-size:20px;'>&bull;&nbsp;<strong>Domestic Journal</strong></div>";
                                for(let i =0; i<performanceList[1].length; i++) {
                                    DJ_tag += "<h11>" +(i+1) + ". " + performanceList[1][i] + "<br></h11>";
                                }
                                performanceStr += DJ_tag;
                            }
                            if(performanceList[2].length > 0) {
                                var IC_tag = "<div class= 'performance"+researcherName[i]+"'"+ "style='width: 1600px; height: auto; color: black;'><br><p style='font-size:20px;'>&bull;&nbsp;<strong>International Conference</strong></p></div>";
                                for(let i =0; i<performanceList[2].length; i++) {
                                    IC_tag += "<h11>" +(i+1) + ". " + performanceList[2][i] +"<br></h11>";
                                }
                                performanceStr += IC_tag;
                            }
                            if(performanceList[3].length > 0) {
                                var DC_tag = "<div class= 'performance"+researcherName[i]+"'"+ "style='width: 1500px; height: auto; color: black; '><br><p style='font-size:20px;'>&bull;&nbsp;<strong>Domestic Conference</strong></p></div>";
                                for(let i =0; i<performanceList[3].length; i++) {
                                    DC_tag += "<h11>" +(i+1) + ". " + performanceList[3][i] +"<br></h11>";
                                }
                                performanceStr += DC_tag;
                            }
                        } else {
                            var null_tag = "<div class= 'performance"+researcherName[i]+"'"+ "style='width: 1600px; height: auto; color: black; border:1px solid;'><h11><br>" + "연구실적이 없습니다." +"<br></h11></div>";
                        }
                        performanceStr += "</div>";
                        if(performanceList != "연구실적이 없습니다.") {
                            $("div .performance"+researcherName[i]).append(performanceStr);
                        } else {
                            $("div .performance"+researcherName[i]).append(null_tag);
                        }
                        $(".memberName"+researcherName[i]).text("실적닫기");
                    } else if(target == "실적닫기") {
                        $("div .performance"+researcherName[i]).empty();
                        $(".memberName"+researcherName[i]).text("실적보기");
                    }
                });
            }
        });
    </script>
    <script>
        $(document).on('click', '.menuSelect', function () {
            // id_value = $(this).attr("id");
            if($(this).attr("id") == "Home") {
                location.href = "/"
            } else if ($(this).attr("id") == "Professor") {
                location.href = "../members/professor"
                //$("#row").load("/members/Professor");
            } else if ($(this).attr("id") == "Researcher") {
                location.href = "../members/researcher"
                //$("#row").load("/members/researcher");
            } else if ($(this).attr("id") == "Alumni") {
                location.href = "../members/alumni"
                //$("#row").load("/members/alumni");
            } else if ($(this).attr("id") == "Paper") {
                location.href = "../paper/paper"
                //$("#row").load("/paper/paper");
            } else if ($(this).attr("id") == "Others") {
                location.href = "../others/others"
                //$("#row").load("/others/others");
            } else if ($(this).attr("id") == "Activity") {
                location.href = "../activity/activity";
                //$("#row").load("/activity/activity");
            } else if ($(this).attr("id") == "linkUpdate") {
                location.href = "../link/linkEdit";
                //$("#row").load("/link/linkEdit");
            }
        });
    </script>
</head>
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
    style=" padding-left: 230px; padding-top: 150px;">
    <div class="modal-dialog">
        <div class="modal-content" style="width: 400px;">
            <div class="login-form" id="login-form">
                <h1>Login</h1>
                <input type="text" id='uId' name="username" placeholder="Username" required>
                <input type="password" id='uPw' name="password" placeholder="Password" required>
                <input type="submit" onclick="login()" value="Login">
            </div>

            <div class="modal-footer">
                <button type="submit" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<body class="skin-black">
    <header class="header">
        <a href="/" class="logo">
            <br>Data Semantics Lab.
        </a>
        <nav class="navbar navbar-static-top" role="navigation">
            <div class="navbar-right">
                <ul class="nav navbar-nav">
                    <li id='loginBtn'>
                        <% if(userInfo==null){ %>
                            <a href="#" data-toggle="modal" data-target="#myModal" type="button">
                                <h11
                                    style="font-size: 20px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif">
                                    <strong>Login</strong>
                                </h11>
                                <span class="iconify" data-icon="entypo:login" data-inline="false"
                                    style="font-size: 25px;">
                            </a>
                            <% } else { %>
                                <a href="#" type="button" onclick="logout()">
                                    <h11
                                        style="font-size: 20px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif">
                                        <strong>Logout</strong>
                                    </h11>
                                    <span class="iconify" data-icon="entypo:login" data-inline="false"
                                        style="font-size: 25px;">
                                </a>
                            <% } %>
                    </li>
                </ul>
            </div>
        </nav>
    </header>

    <!--#New, 연구원 데이터 등록-->
    <div class="modal fade" id="new" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
        style=" padding-left: 150px; padding-top: 120px;">
        <div class="modal-dialog">
            <div class="modal-content" style="width: 640px; height: 620px;">
                <div class="modal-header" style="height: 50px; text-align:center;">
                    New
                </div>
                <div class="modal-body">
                    <form method="POST" enctype="multipart/form-data" action="/researcherUpload" style="width:550px">
                        <div class="form-group">
        <%                  let new_member=['name','department' , 'Email' , 'YearOfAdmission' , 'ResearchTopics' , 'description'];
                            let placeholder_member = ['', '', 'ex) abc123 (at) gmail (dot) com', '', '', '- "-"을 입력하면 \n- 불릿기호가 생성됩니다. \n'];
                            for(let i=0; i<new_member.length; i++) {
        %>
                                <div style="margin-left:30px; width: 60px;">
                                    <% if(i != new_member.length-1) { %>
                                    <h13 style="margin-left: 30px;">
                                        <%=         new_member[i] + ':' %>
                                    </h13>
                                    <input class='<%=new_member[i]%>' name='<%=new_member[i]%>' id='<%=new_member[i]%>' style="margin-left:30px; width: 350px" value='' placeholder = '<%=placeholder_member[i]%>'/>
                                    <% } else { %>
                                    <h13 style="margin-left: 30px;">
                                        <%=         new_member[i] + '*:' %>
                                    </h13>
                                        <textarea class='<%=new_member[i]%>' name='<%=new_member[i]%>' id='<%=new_member[i]%>' style="margin-left:30px; width: 500px; height: 70px; white-space: pre;" value='' placeholder = '<%=placeholder_member[i]%>'></textarea>
                                    <% } %>
                                </div>
        <%                      }                                       %>
                        </div>
                        <div class="form-group">
                            <input type="file" name="researcherUpload" id="file" style = "width:400px; margin-left: 60px;" placeholder="파일 선택"/>
                        </div>
                        <br>
                        <button type="reset" class="btn btn-default clear"  data-dismiss="modal" style="font-size: 16px;float:right; margin-left:5px">close</button>
                        <button type="submit" class="btn btn-primary" style="font-size: 16px;float:right;">Save</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!--#list, DB에서 조회-->
    <div class="modal fade" id="list" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
        style=" margin-left: -400px; padding-top: 80px;">
        <div class="modal-dialog">
            <div class="modal-content" style="margin-left: -100px; margin-top:-10px; width: 1300px; height: 800px;">
                <button type="button" class="btn btn-default" data-dismiss="modal" style="float:right">Close</button>
                <div class="modal-header" style="height: 50px;">
                    <center style="font-size: 18px;">
                        <string>
                            Member list
                        </string>
                    </center>
                </div>
                <table class="table table-hover memberTable" id="memberTable" style="margin-left: auto; margin-right: auto;">
                    <thread>
                        <tr>
                            <th>
                                <center>
                                    Num
                                </center>
                            </th>
                            <th>
                                <center>Name</center>
                            </th>
                            <th>
                                <center>Department</center>
                            </th>
                            <th>
                                <center>E-mail</center>
                            </th>
                            <th>
                                <center>YearOfAdmission</center>
                            </th>
                            <th>
                                <center>ResearchTopics</center>
                            </th>
                            <th>
                                <center>description</center>
                            </th>
                            <th>
                                <center>Edit</center>
                            </th>
                            <th>
                                <center>Delete</center>
                            </th>
                        </tr>
                    </thread>
                    <tbody>
<%                      for(let i=0; i<researcher_results.length; i++) {    %>
                            <tr>
                                <td>
                                    <center>
<%=                                     researcher_results[i][0]                                 %>
                                    </center>
                                </td>
                                <td style="width:80px">
                                    <center>
<%=                                     researcher_results[i][1]            %>
                                    </center>
                                </td>
                                <td style="width:130px">
                                    <center>
<%=                                     researcher_results[i][4]            %>
                                    </center>
                                </td>
                                <td>
                                    <center>
<%=                                     researcher_results[i][5]            %>
                                    </center>
                                </td>
                                <td>
                                    <center>
<%=                                     researcher_results[i][6]            %>
                                    </center>
                                </td>
                                <td>
                                    <center>
<%=                                     researcher_results[i][7]            %>
                                    </center>
                                </td>
                                <td>
                                    <center>
<%=                                     researcher_results[i][11]            %>
                                    </center>
                                </td>
                                <td>
                                    <center>
                                        <a href="#" class="btn btn-default updateBtn" data-toggle="modal"
                                            data-target="#edit" type="button">
                                            수정</a>
                                    </center>
                                </td>
                                <td>
                                    <center>
                                        <a type="button" class="btn btn-primary"
                                            onclick="researcher_delete('<%= researcher_results[i][1] %>'); javascript:rowDel(this)">
                                            삭제
                                        </a>
                                    </center>
                                </td>
                            </tr>
                            <% } %>
                    </tbody>
                </table>

                <br>
            </div> -->
        </div>
    </div>
    <!--   #list -> #edit   -->
    <div class="modal fade" id="edit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
        style=" padding-left: 70px; padding-top: 80px;">

        <div class="modal-dialog">
            <div class="modal-content" style="width: 640px; height: 650px;">
                <div class="modal-header" style="height: 50px;">
                    <center style="font-size: 18px;">Edit</center>
                </div>
                <div class="modal-body">
                    <form method="POST" enctype="multipart/form-data" action="/researcherUpdate" style="width:600px">
                        <div class="form-group">
<%                          let edit_member=['number','name','department' , 'Email' , 'yearOfAdmission' , 'researchTopics', 'description' ]; 
                            for(let i=0; i<edit_member.length; i++) { %>
                                <div style="margin-left:30px; width: 60px;">
                                    <% if(i != edit_member.length-1) { %>
                                    <h13 style="margin-left: 30px;">
    <%=                                 edit_member[i] + ':'    %>
                                    </h13>
                                    <% } else { %>
                                        <h13 style="margin-left: 30px;">
        <%=                                 edit_member[i] + '*:'    %>
                                        </h13>
                                    <% } %>
    <%                              if(i == 0) {            %>
                                        <!-- <input type='text' name='<%=edit_member[i]%>' id='<%=edit_member[i]%>' value = '' style="margin-left:30px; width: 350px;"/> -->
                                        <select class='number' name='number' id='number' style="margin-left: 30px;">
                                            <% for(let j=0; j<researcher_results.length; j++) { %>
                                                <option value='<%=j+1%>'><%=j+1%></option>
                                            <% } %> 
                                        </select> 
    <%                              } else if(i < edit_member.length-1){                %> 
                                        <input class='<%=edit_member[i]%>' name='<%=edit_member[i]%>' id='<%=edit_member[i]%>' style="margin-left:30px; width: 350px" value=''/>
    <%                              } else {                      %>
                                        <textarea class='<%=edit_member[i]%>' name='<%=edit_member[i]%>' id='<%=edit_member[i]%>' style="margin-left:30px; width: 500px; height: 70px; white-space: pre;" value='' placeholder='- "-"을 입력하면 불릿기호가 생성됩니다.'></textarea>
                                <% } %>
                                </div>
<%                          }                               %>
                            <input type='hidden' name='beforeId' id='beforeId' value = '<%=edit_member[0]%>' style="margin-left:50px; width: 350px;"/>
                            <input type='hidden' name='beforeName' id='beforeName' value = '<%=edit_member[1]%>' style="margin-left:50px; width: 350px;"/>
                        </div>
                        <div class="form-group">
                            <input type="file" name="researcherUpdate" id="file" id="file" style="margin-left:60px" >
                        </div>
                        <br>
                        <button type="reset" class="btn btn-default" data-dismiss="modal" style="font-size: 16px;float:right; margin-left:5px">close</button>
                        <button type="submit" class="btn btn-primary" style="font-size: 16px;float:right;">Save</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="wrapper row-offcanvas row-offcanvas-left">
        <aside class="left-side sidebar-offcanvas">
            <section class="sidebar">
                <div class="user-panel">
                    <div class="pull-left image">
                        <img src="../../img/logo_1.jpg" class="image" alt="User Image" />
                    </div>
                </div>
                <form action="#" method="get" class="sidebar-form"></form>
                <ul class="sidebar-menu">
                    <li>
                        <!-- <a href="/"> -->
                        <a class="menuSelect" id="Home" style="cursor:pointer; ">
                            <i class="fa fa-home" aria-hidden="true"></i>
                            <span>Home</span>
                        </a>
                    </li>
                    <li class="treeview">
                        <a href="#">
                            <i class="fa fa-user" aria-hidden="true"></i>
                            <span>Members</span>
                            <i class="fa fa-angle-left pull-right"></i>
                        </a>
                        <ul class="treeview-menu">
                            <li>
                                <a class="menuSelect" id="Professor" style="cursor:pointer; ">
                                    <i class="fa fa-angle-double-right">
                                    </i>
                                    Professor
                                </a>
                            </li>
                            <li>
                                <a class="menuSelect" id="Researcher" style="cursor:pointer; ">
                                    <i class="fa fa-angle-double-right">
                                    </i>
                                    Researcher
                                </a>
                            </li>
                            <li>
                                <a class="menuSelect" id="Alumni" style="cursor:pointer; ">
                                    <i class="fa fa-angle-double-right">
                                    </i>
                                    Alumni
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a class="menuSelect" id="Paper" style="cursor:pointer; ">
                            <i class="fa fa-file" aria-hidden="true"></i>
                            <span>Paper</span>
                        </a>
                    </li>
                    <li>
                        <a class="menuSelect" id="Others" style="cursor:pointer; ">
                            <i class="fa fa-plus-square" aria-hidden="true"></i>
                            <span>Others</span>
                        </a>
                    </li>
                    <li>
                        <a class="menuSelect" id="Activity" style="cursor:pointer; ">
                            <i class="fa fa-tasks fa-1x" aria-hidden="true"></i>
                            <span>Activity</span>
                        </a>
                    </li>
                    <li class="treeview">
                        <a class="menuSelect" href="#" style="cursor:pointer; ">
                            <i class="fa fa-share" aria-hidden="true"></i>
                            <span>Link</span>
                            <i class="fa fa-angle-left pull-right"></i>
                        </a>
                        <ul class="treeview-menu">
                            <% for(let i =0; i<iconInfo.length; i++) {%>
                                <li>
                                    <a class="menuSelect" href='<%=iconInfo[i][2]%>' target="_blank" id="<%=iconInfo[i][0]%>" style="cursor:pointer;">
                                        <i class="fa fa-angle-double-right"></i>
                                        <%=iconInfo[i][0]%>
                                    </a>
                                </li>
                            <% } %>
                            <% if(userInfo != null) { %>
                                <li>
                                    <a class="menuSelect" id="linkUpdate" style="cursor:pointer; ">
                                        <i class="fa fa-angle-double-right"></i>
                                        Edit
                                    </a>
                                </li>
                            <% } %>
                        </ul>
                    </li>
                </ul>
                <div>
                </div>
            </section>
        </aside>
        <aside class="right-side" style="margin-left: 220px; margin-top: 30px;">
        <div class="content-header" style="height:30px">
            <h1>Researcher
<%              if(userInfo!=null) { %>
    &nbsp;
                <a href="#" data-toggle="modal" data-target="#list" type="button" class="btn btn-default" style="float:right; height: 35px; margin: 0px 3px 3px 0px;">
                    <h14 style="font-size: 15px;">
                        Edit
                    </h14>
                </a>
                <a href="#" data-toggle="modal" data-target="#new" type="button" class="btn btn-primary" style="float:right; height: 35px; margin: 0px 3px 3px 0px;">
                    <h14 style="font-size: 15px;">
                        New
                    </h14>
                </a>
<%              }                    %>
            </h1>
        </div>
        <section class="content">
            <div class="row" style="padding-left: 12px;">
                <div class="box box-info">
                    <div class="box-header">
                    </div>
<%                  for(let i=0; i<researcher_results.length; i++) {        %>
                        <div class="box-body" style="height: 200px;">
                            <img src = <%="/img/" +researcher_results[i][1] + ".jpg" %> onerror="javascript:this.src='/img/default.png'" align="left" style="width:160px; height:187px;"/>
                            <div class="researcherName">
                                <h11>
                                    <strong>
    <%=                                 researcher_results[i][1]                %>
                                    </strong>
                                </h11>
                            </div>
                                <li>
                                    Department : <%= researcher_results[i][4] %>
                                </li>
                                <% 
                                   var desciptionList = [];
                                   if(researcher_results[i][11] != null) {
                                        if(researcher_results[i][11].includes("-")) {
                                            desciptionList = researcher_results[i][11].split("-");
                                        }
                                    }
                                %>

                                <% 
                                    if(researcher_results[i][11] != null) {
                                        if(researcher_results[i][11].length > 0) {
                                            if(desciptionList.length > 0) {
                                                for(let j = 1 ; j<desciptionList.length; j++) { 
                                %>
                                                    <li>
                                                        <%= desciptionList[j] %>
                                                    </li>
                                <%              } %>
                                <%              if(desciptionList.length == 4) {%>
                                                    <br>
                                <%              } else if(desciptionList.length == 3){
                                                    for(let a = 0; a<2; a++) { %>
                                                        <br>
                                <%                  } %>
                                <%              } else if(desciptionList.length == 2){
                                                    for(let a = 0; a<3; a++) { %>
                                                        <br>
                                <%                  } %>
                                <%              } else if(desciptionList.length == 1){ 
                                                    for(let a = 0; a<4; a++) { %>
                                                        <br>
                                                <%  } %>
                                <%              } %>          
                                <%          } else { %>
                                                    <li>
                                                        <%= researcher_results[i][11] %>
                                                    </li>
                                                    <br><br><br>
                                <%          }   %>                                                

                                <%      } else { %>
                                            <pre style="width: 500px; height: 95px; border:none; background-color: white; white-space: pre-line; font-size: 16px; font-family: none;">
                                                <%= // 업데이트 등 수정하다가 공백으로 되어 있을 때 %>
                                            </pre>
                                <%      } %>
                                
                                <% } else { %>
                                        <pre style="width: 500px; height: 95px; border:none; background-color: white; white-space: pre-line; font-size: 16px; font-family: none;">
                                            <%= // 아예 null 값%>
                                        </pre>
                                <% } %>

                            <button class="<%="memberName"+researcher_results[i][1]%>" style="border: 0; outline:0; height: 32px; color: black; font-size:14px;" >
                                실적보기
                            </button>
                        </div>
                        <div class="<%="performance"+researcher_results[i][1]%>">
                        </div>
                        <%                  } %>
                        <br><br>
                </div>
                <a href="#" class="top" style="position: fixed; left:95%; bottom:50px; display:none; font-size:30px; color:black">
                    <i class="fas fa-arrow-up"></i>
                </a>
        </section>
    </aside>

</body>

</html>