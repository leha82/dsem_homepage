<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>DSEM Lab.</title>
    <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
    <link href="/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <link href="/css/AdminLTE.css" rel="stylesheet" type="text/css" />
    <script src="/js/iconify.min.js"></script>
    <script src="/js/jquery.min.js"></script>
    <script src="/js/jquery-ui-1.10.3.min.js" type="text/javascript"></script>
    <script src="/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="/js/AdminLTE/app_homepage.js" type="text/javascript"></script>
    <script src="/js/function.js"></script>

    <!-- 삭제할 때 테이블의 해당 행 삭제되어 보이도록 함 -->
    <script>
        function rowDel(obj) {
            var Del_tr = obj.parentNode.parentNode.parentNode;
            console.log(Del_tr);
            Del_tr.parentNode.removeChild(Del_tr);
        }
    </script>

    <!-- 수정할 때 테이블의 해당 행의 정보가 미리 input값으로 존재 -->
    <script>

        let memberInfo = [];
        $(".updateBtn").click(function () {
            var updateBtn = $(this);

            var tr = updateBtn.parent().parent().parent();
            var td = tr.children();

            td.each(function (i) {
                memberInfo[i] = td.eq(i).text().trim();
            })
            $("input[name=number]").attr('value', memberInfo[0]);
            $("input[name=name]").attr('value', memberInfo[1]);
            $("input[name=department]").attr('value', memberInfo[2]);
            $("input[name=Email]").attr('value', memberInfo[3]);
            $("input[name=yearOfAdmission]").attr('value', memberInfo[4]);
            $("input[name=researchTopics]").attr('value', memberInfo[5]);
        });
    </script>
</head>

<body class="skin-black">
    <!--#New, 연구원 데이터 등록-->
    <div class="modal fade" id="new" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
        style=" padding-left: 150px; padding-top: 120px;">
        <div class="modal-dialog">
            <div class="modal-content" style="width: 600px; height: 550px;">
                <div class="modal-header" style="height: 50px;">
                    <center style="font-size: 18px;">New</center>
                </div>
                <div class="modal-body">
<%                  let new_member=['name','department' , 'Email' , 'yearOfAdmission' , 'researchTopics' ];
                    for(let i=0; i<new_member.length; i++) {
%>
                        <div style="margin-right: 10px; margin-left:50px; width: 60px;">
                            <h13 style="margin-left: 50px;">
<%=                             new_member[i] + ':' %>
                            </h13>
                            <input style="margin-left:50px; width: 350px" id='<%= 'researcherInsert_' + new_member[i]%>' />
                        </div>
<%                      }           %>
                        <br>
                        <input type="file" accept="image/*" style="margin-left:100px; width: 350px;" id="imgFile"/>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary" data-dismiss="modal"
                        onclick="researcher()">Save</button>
                    <button type="submit" class="btn btn-default" data-dismiss="modal" onclick="close()">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!--#list, DB에서 조회-->
    <div class="modal fade" id="list" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
        style=" margin-left: -400px; padding-top: 80px;">
        <div class="modal-dialog">
            <div class="modal-content" style="width: 1050px; height: 600px;">
                <button type="submit" class="btn btn-default" data-dismiss="modal" style="float:right">Close</button>
                <div class="modal-header" style="height: 50px;">
                    <center style="font-size: 18px;">
                        <string>
                            Member list
                        </string>
                    </center>
                </div>
                <!-- <br> -->
                <table class="table table-hover memberTable" id="memberTable" style="margin-left:10px; width:1000px">
                    <thread>
                        <tr>
                            <th>
                                <center>
                                    Number
                                </center>
                            </th>
                            <th>
                                <center>Name</center>
                            </th>
                            <th>
                                <center>Department</center>
                            </th>
                            <th>
                                <center>E-mail</center>
                            </th>
                            <th>
                                <center>YearOfAdmission</center>
                            </th>
                            <th>
                                <center>ResearchTopics</center>
                            </th>
                            <th>
                                <center>Edit</center>
                            </th>
                            <th>
                                <center>Delete</center>
                            </th>
                        </tr>
                    </thread>
                    <tbody>
<%                      for(let i=0; i<researcher_results.length; i++) {    %>
                            <tr>
                                <td>
                                    <center>
<%=                                     i+1                                 %>
                                    </center>
                                </td>
                                <td>
                                    <center>
<%=                                     researcher_results[i][1]            %>
                                    </center>
                                </td>
                                <td>
                                    <center>
<%=                                     researcher_results[i][4]            %>
                                    </center>
                                </td>
                                <td>
                                    <center>
<%=                                     researcher_results[i][5]            %>
                                    </center>
                                </td>
                                <td>
                                    <center>
<%=                                     researcher_results[i][6]            %>
                                    </center>
                                </td>
                                <td>
                                    <center>
<%=                                     researcher_results[i][7]            %>
                                    </center>
                                </td>
                                <td>
                                    <center>
                                        <a href="#" class="btn btn-default updateBtn" data-toggle="modal"
                                            data-target="#edit" type="button">
                                            수정</a>
                                    </center>
                                </td>
                                <td>
                                    <center>
                                        <a type="button" class="btn btn-primary"
                                            onclick="researcher_delete('<%= researcher_results[i][1] %>'); javascript:rowDel(this)">
                                            삭제
                                        </a>
                                    </center>
                                </td>
                            </tr>
                            <% } %>
                    </tbody>
                </table>

                <br>
            </div> -->
        </div>
    </div>

    <!--   #list -> #edit   -->
    <div class="modal fade" id="edit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
        style=" padding-left: 70px; padding-top: 80px;">

        <div class="modal-dialog">
            <div class="modal-content" style="width: 600px; height: 600px;">
                <div class="modal-header" style="height: 50px;">
                    <center style="font-size: 18px;">Edit</center>
                </div>
                <div class="modal-body">
<%                  let edit_member=['number','name','department' , 'Email' , 'yearOfAdmission' , 'researchTopics' ]; 
                    for(let i=0; i<edit_member.length; i++) { 
%>
                        <div style="margin-right: 10px; margin-left:50px; width: 60px;">
                            <h13 style="margin-left: 50px;">
<%=                             edit_member[i] + ':'    %>
                            </h13>
<%                              if(i == 0) {            %>
                                <input type='text' name='<%=edit_member[i]%>' id='<%='researcherUpdate_' +
                                    edit_member[i]%>'value = '' style="margin-left:50px; width: 350px;" readonly/>
<%                              } else {                %> 
                                <input type='text' name='<%=edit_member[i]%>' id='<%='researcherUpdate_' +
                                    edit_member[i]%>'value = '' style="margin-left:50px; width: 350px"/>
<%                              }                       %>
                        </div>
<%                      }                               %>
                        <br>
                        <input type="file" accept="image/*" style="margin-left:100px; width: 350px;" id="imgFile" />
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary" data-dismiss="modal"
                        onclick="researcher_update()">Save</button>
                    <button type="submit" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>



    <aside class="right-side" style="margin-left: 0px; margin-top: 0px;">
        <div class="content-header" style="height:30px">
            <h1>Researcher
<%              if(userInfo!=null) { %>
                <a href="#" data-toggle="modal" data-target="#list" type="button" class="btn btn-default" style="float:right; height: 35px;">
                    <h14 style="font-size: 15px;">
                        Edit
                    </h14>
                </a>
                <a href="#" data-toggle="modal" data-target="#new" type="button" class="btn btn-primary" style="float:right; height: 35px;">
                    <h14 style="font-size: 15px;">
                        New
                    </h14>
                </a>
<%              }                    %>
            </h1>
        </div>
        <section class="content">
            <div class="row" style="padding-left: 12px;">
                <div class="box box-info">
                    <div class="box-header">
                    </div>
<%                  for(let i=0; i<researcher_results.length; i++) {        %>
                        <div class="box-body">
                            <img src= <%="/img/" +researcher_results[i][1] + ".jpg" %> align="left"/>
                            <h10>
                                <strong>
<%=                                 researcher_results[i][1]                %>
                                </strong>
                            </h10>
                            <li>
                                Department : <%= researcher_results[i][4]%>
                            </li>
                            <li>
                                E-mail : <%= researcher_results[i][5]%>
                            </li>
                            <li>
                                Year of admission : <%= researcher_results[i][6]%>
                            </li>
                            <li>
                                Research topics :<%= researcher_results[i][7]%>
                            </li>
                            <a href="#" data-toggle="" data-target="#performance" type="button"
                                style="height: 32px; color: black;" class="btn btn-default">
                                <h14 style="font-size: 14px;">
                                    실적보기
                                </h14>
                            </a>
                            <research></research>
                            <br>
                        </div>
                        <% } %>

                </div>
            </div>
        </section>
    </aside>

</body>

</html>