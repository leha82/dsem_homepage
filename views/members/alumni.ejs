<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>DSEM Lab.</title>
    <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
    <link href="/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <link href="/css/AdminLTE.css" rel="stylesheet" type="text/css" />
    <script src="/js/iconify.min.js"></script>
    <script src="/js/jquery.min.js"></script>
    <script src="/js/jquery-ui-1.10.3.min.js" type="text/javascript"></script>
    <script src="/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="/js/AdminLTE/app_homepage.js" type="text/javascript"></script>
    <script src="/js/function.js"></script>
    <script src="https://use.fontawesome.com/releases/v5.15.4/js/all.js" data-auto-a11y="true"></script>

    <!-- 모달창 끄면 .form .input[value] 초기화 -->
    <script>
        $(document).ready(function() {
            $('.modal').on('hidden.bs.modal', function(e) {
                $('form').each(function() {
                    this.reset();
                })
            });
        });
    </script>
    <!-- 이미지 확인하기 -->
    <script>
        $(document).ready(function() {
            $('.ImagePrint').click(function () {
                if($('.ImagePrint').text() != "이미지 닫기") {
                    document.getElementById('ImgPrint').style.display = 'block';
                    $('.ImagePrint').html("이미지 닫기");
                } else {
                    document.getElementById('ImgPrint').style.display = 'none';
                    $('.ImagePrint').html("이미지 확인");
                }
            });
            $('.ImagePrint2').click(function () {
                if($('.ImagePrint2').text() != "이미지 닫기") {
                    document.getElementById('ImgPrint2').style.display = 'block';
                    $('.ImagePrint2').html("이미지 닫기");
                } else {
                    document.getElementById('ImgPrint2').style.display = 'none';
                    $('.ImagePrint2').html("이미지 확인");
                }
                if(!$("#file2").val()) {
                    $('#ImgPrint2').attr("src", "/img/" + $('input[name=name]').val() + ".jpg");
                }
            });
        });
    </script>
    <script>
        $(document).ready(function() {
            $("#login-form").keypress(function (e) {
                if(e.keyCode == 13) {
                    login();
                }
            });
    });
    </script>
    <script type="text/javascript">
        $(document).ready(function(){
            function readURL1(input) {
                if (input.files && input.files[0]) {
                    var reader = new FileReader(); //파일을 읽기 위한 FileReader객체 생성
                    reader.onload = function (e) { 
                    //파일 읽어들이기를 성공했을때 호출되는 이벤트 핸들러
                        $('#ImgPrint').attr('src', e.target.result);
                        //이미지 Tag의 SRC속성에 읽어들인 File내용을 지정
                        //(아래 코드에서 읽어들인 dataURL형식)
                    }                    
                    reader.readAsDataURL(input.files[0]);
                    //File내용을 읽어 dataURL형식의 문자열로 저장
                }
            }//readURL()--
            //file 양식으로 이미지를 선택(값이 변경) 되었을때 처리하는 코드
            $("#file").change(function(){
                readURL1(this);
            });

            function readURL2(input) {
                if (input.files && input.files[0]) {
                    var reader = new FileReader(); //파일을 읽기 위한 FileReader객체 생성
                    reader.onload = function (e) { 
                    //파일 읽어들이기를 성공했을때 호출되는 이벤트 핸들러
                        $('#ImgPrint2').attr('src', e.target.result);
                        //이미지 Tag의 SRC속성에 읽어들인 File내용을 지정
                        //(아래 코드에서 읽어들인 dataURL형식)
                    }                    
                    reader.readAsDataURL(input.files[0]);
                    //File내용을 읽어 dataURL형식의 문자열로 저장
                }
            }//readURL()--
            //file 양식으로 이미지를 선택(값이 변경) 되었을때 처리하는 코드
            $("#file2").change(function(){
                readURL2(this);
            });
         });
    </script>
    <!-- 삭제할 때 테이블의 해당 행 삭제되어 보이도록 함 -->
    <script>
        $(document).ready(function() {
            function rowDel(obj) {
                var Del_tr = obj.parentNode.parentNode.parentNode;
                console.log(Del_tr);
                Del_tr.parentNode.removeChild(Del_tr);
            }
        });
    </script>
    <!-- 수정할 때 테이블의 해당 행의 정보가 미리 input값으로 존재 -->
    <script>
        $(document).ready(function() {
            let memberInfo = [];
            $(".updateBtn").click(function () {
                var updateBtn = $(this);
    
                var tr = updateBtn.parent().parent().parent();
                var td = tr.children();
    
                td.each(function (i) {
                    memberInfo[i] = td.eq(i).text().trim();
                })
                $('select.number').val(memberInfo[0]).trigger('change');
                $("input[name=name]").attr('value', memberInfo[1]);
                $("input[name=department]").attr('value', memberInfo[2]);
                $("input[name=Email]").attr('value', memberInfo[3]);
                $("input[name=yearOfAdmission]").attr('value', memberInfo[4]);
                $("input[name=graduationYear]").attr('value', memberInfo[5]);
                $("input[name=researchTopics]").attr('value', memberInfo[6]);
                $("textarea[class=description]").text(memberInfo[7]);
                $(".imgPath2").attr("value", memberInfo[1] + ".jpg");
    
                // hidden 타입 데이터
                $("input[name=beforeId]").attr('value', memberInfo[0]);
                $("input[name=beforeName]").attr('value', memberInfo[1]);

                $('.modal2').on('hidden.bs.modal', function(e) {
                    $("input[name=name]").attr('value', '');
                    $("input[name=department]").attr('value', '');
                    $("input[name=Email]").attr('value', '');
                    $("input[name=yearOfAdmission]").attr('value', '');
                    $("input[name=graduationYear]").attr('value', '');
                    $("input[name=researchTopics]").attr('value', '');
                    $("textarea[class=description]").text('');
                    $(".imgPath2").attr("value", '');
                    
                    $('.ImagePrint2').html("이미지 확인");
                    document.getElementById('ImgPrint2').style.display = 'none';
                    $('#ImgPrint2').attr('src', '');
                });
            });
        });
        </script>
    <script>
        $(document).ready(function() {
            $(window).scroll( function() {
                if ($( this).scrollTop() > 200 ) {
                    $('.top').fadeIn();
                } else {
                    $('.top').fadeOut();
                }
            });
            $('.top').click( function() {
                $('html, body').animate({scrollTop : 0}, 400);
                return false;
            });
        });
    </script>
    <!-- <form> POST 메소드, <pre> 태그 엔터눌러도 제출되지  않도록 장치-->
    <script>
        $(document).ready(function() {
            $("input[name='description']").keydown(function() {
                if(event.keyCode === 13) {
                    event.preventDefault();
                }
            });
        });
    </script>
    <!-- 사진 업로드한거 이름 보이게 하기 -->
    <script>
        $(document).ready(function() {
            $("#file").on('change',function(){
                var fileName = $("#file").val();
                $(".imgPath").val(fileName);
            });
            $("#file2").on('change',function(){
                var fileName = $("#file2").val();
                $(".imgPath2").val(fileName);
            });
        });
    </script>
    <!-- 실적보기 클릭 시 해당 연구원이 들어간 논문리스트 리턴-->
    <script>
        function regularExpression(str) {
            //str = str.replace(/^,/,"");

            str = str.replace(/,{2,}/gi, ",");
            str = str.replace(".,",",");
            str = str.replace(/,/gi, ", ");

            return str;
        }

        function selectPerformance(name) {
            let performanceList = [];
            let journal_strArray = '<%=paper_results[0]%>'.split("^");
            let conference_strArray = '<%=paper_results[1]%>'.split("^");
            let IJ = [], DJ = [];
            let IC= [], DC = [];

            for(let i =0; i<journal_strArray.length; i++) {
                if(journal_strArray[i].includes(name)) {
                    if(journal_strArray[i].indexOf("IJ") != -1) {
                        journal_strArray[i] = journal_strArray[i].substring(journal_strArray[i].indexOf("IJ")+3, journal_strArray[i].length);
                        let journal_IJ = regularExpression(journal_strArray[i]);
                        IJ.push(journal_IJ);
                    } else if(journal_strArray[i].indexOf("DJ") != -1) {
                        journal_strArray[i] = journal_strArray[i].substring(journal_strArray[i].indexOf("DJ")+3, journal_strArray[i].length);
                        let journal_DJ = regularExpression(journal_strArray[i]);
                        DJ.push(journal_DJ); 
                    }
               }
            }
            for(let i =0; i<conference_strArray.length; i++) {
                if(conference_strArray[i].includes(name)) {
                    if(conference_strArray[i].indexOf("IC") != -1) {
                        conference_strArray[i] = conference_strArray[i].substring(conference_strArray[i].indexOf("IC")+3, conference_strArray[i].length);
                        let conference_IC = regularExpression(conference_strArray[i]);
                        IC.push(conference_IC);
                    } else if(conference_strArray[i].indexOf("DC") != -1) {
                        conference_strArray[i] = conference_strArray[i].substring(conference_strArray[i].indexOf("DC")+3, conference_strArray[i].length);
                        let conference_DC = regularExpression(conference_strArray[i]);
                        DC.push(conference_DC);
                    }
               }
            }
            performanceList.push(IJ);
            performanceList.push(DJ);
            performanceList.push(IC);
            performanceList.push(DC);
            if(IJ,DJ,IC,DC.length < 1) {
                return "연구실적이 없습니다."
            } else {
                return performanceList;
            }
        }
    </script>
    <script>
        $(document).ready(function() {
            var alumniName = [];
            var name = $('div .alumniName').text().replace(/(\s*)/g,"");
            var tmp = '';

            for(let i =0; i<name.length; i+=3) {
                tmp = name.substring(i, i+3);
                alumniName.push(tmp);
            }

            for(let i =0; i<alumniName.length; i++) {
                $(".memberName"+alumniName[i]).click(function () {
                    var performanceList = selectPerformance(alumniName[i]);
                    console.log(performanceList);

                    var target = $(".memberName"+alumniName[i]).text().replace(/(\s*)/g,"");
                    if(target == "실적보기") {
                        if(performanceList != "연구실적이 없습니다.") {
                            var performanceStr = "";
                            var tagStr = "<div class='all' style='border:1px solid;'>";
                            performanceStr += tagStr;
                            if(performanceList[0].length > 0) { // International Journal
                                var IJ_tag = "<div class= 'performance"+alumniName[i]+"'"+ "style='width: 1600px; height: auto; color: black;'><br><p style='font-size:20px;'>&bull;&nbsp;<strong>International Journal</strong></p></div>";
                                for(let i =0; i<performanceList[0].length; i++) {
                                    IJ_tag += "<h11>" +(i+1) + ". " + performanceList[0][i] +"<br></h11>";
                                }
                                performanceStr += IJ_tag;
                            }
                            if(performanceList[1].length > 0) {
                                var DJ_tag = "<div class= 'performance"+alumniName[i]+"'"+ "style='width: 1600px; height: auto; color: black;'><br><p style='font-size:20px;'>&bull;&nbsp;<strong>Domestic Journal</strong></div>";
                                for(let i =0; i<performanceList[1].length; i++) {
                                    DJ_tag += "<h11>" +(i+1) + ". " + performanceList[1][i] + "<br></h11>";
                                }
                                performanceStr += DJ_tag;
                            }
                            if(performanceList[2].length > 0) {
                                var IC_tag = "<div class= 'performance"+alumniName[i]+"'"+ "style='width: 1600px; height: auto; color: black;'><br><p style='font-size:20px;'>&bull;&nbsp;<strong>International Conference</strong></p></div>";
                                for(let i =0; i<performanceList[2].length; i++) {
                                    IC_tag += "<h11>" +(i+1) + ". " + performanceList[2][i] +"<br></h11>";
                                }
                                performanceStr += IC_tag;
                            }
                            if(performanceList[3].length > 0) {
                                var DC_tag = "<div class= 'performance"+alumniName[i]+"'"+ "style='width: 1500px; height: auto; color: black;'><br><p style='font-size:20px;'>&bull;&nbsp;<strong>Domestic Conference</strong></p></div>";
                                for(let i =0; i<performanceList[3].length; i++) {
                                    DC_tag += "<h11>" +(i+1) + ". " + performanceList[3][i] +"<br></h11>";
                                }
                                performanceStr += DC_tag;
                            }
                        } else {
                            var null_tag = "<div class= 'performance"+alumniName[i]+"'"+ "style='width: 1600px; height: auto; color: black;'><h11><br>" + "연구실적이 없습니다." +"<br></h11></div>";
                        }
                        performanceStr += "</div>";
                        if(performanceList != "연구실적이 없습니다.") {
                            $("div .performance"+alumniName[i]).append(performanceStr);
                        } else {
                            $("div .performance"+alumniName[i]).append(null_tag);
                        }
                        $(".memberName"+alumniName[i]).text("실적닫기");
                    } else if(target == "실적닫기") {
                        $("div .performance"+alumniName[i]).empty();
                        $(".memberName"+alumniName[i]).text("실적보기");
                    }
                });
            }
        });
    </script>
    <script>
        $(document).on('click', '.menuSelect', function () {
            // id_value = $(this).attr("id");
            if($(this).attr("id") == "Home") {
                location.href = "/"
            } else if ($(this).attr("id") == "Professor") {
                location.href = "../members/professor"
                //$("#row").load("/members/Professor");
            } else if ($(this).attr("id") == "Researcher") {
                location.href = "../members/researcher"
                //$("#row").load("/members/researcher");
            } else if ($(this).attr("id") == "Alumni") {
                location.href = "../members/alumni"
                //$("#row").load("/members/alumni");
            } else if ($(this).attr("id") == "Paper") {
                location.href = "../paper/paper"
                //$("#row").load("/paper/paper");
            } else if ($(this).attr("id") == "Others") {
                location.href = "../others/others"
                //$("#row").load("/others/others");
            } else if ($(this).attr("id") == "Activity") {
                location.href = "../activity/activity";
                //$("#row").load("/activity/activity");
            } else if ($(this).attr("id") == "linkUpdate") {
                location.href = "../link/linkEdit";
                //$("#row").load("/link/linkEdit");
            }
        });
    </script>

</head>
<style>
    .form-group .imgPath2{
        display: inline-block;
        padding: 0 10px;
        vertical-align: middle;
        border: 1px solid #dddddd;
        color: #999999;
        width: 78%;
        height: 40px;
    }
    .form-group label {
        display: inline-block;
        padding: 10px 20px;
        color: #fff;
        vertical-align: middle;
        background-color: #999999;
        cursor: pointer;
        height: 40px;
        margin-left: 60px;
    }
    .form-group input[type="file"] {
        position: absolute;
        width: 0;
        height: 0;
        padding: 0;
        overflow: hidden;
        border: 0;
    }
</style>



<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
    style=" padding-left: 230px; padding-top: 150px;">
    <div class="modal-dialog">
        <div class="modal-content" style="width: 400px;">
            <div class="login-form" id="login-form">
                <h1>Login</h1>
                <input type="text" id='uId' name="username" placeholder="Username" required>
                <input type="password" id='uPw' name="password" placeholder="Password" required>
                <input type="submit" onclick="login()" value="Login">
            </div>

            <div class="modal-footer">
                <button type="submit" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<body class="skin-black">
    <header class="header">
        <a href="/" class="logo">
            <br>Data Semantics Lab.
        </a>
        <nav class="navbar navbar-static-top" role="navigation">
            <div class="navbar-right">
                <ul class="nav navbar-nav">
                    <li id='loginBtn'>
                        <% if(userInfo==null){ %>
                            <a href="#" data-toggle="modal" data-target="#myModal" type="button">
                                <h11
                                    style="font-size: 20px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif">
                                    <strong>Login</strong>
                                </h11>
                                <span class="iconify" data-icon="entypo:login" data-inline="false"
                                    style="font-size: 25px;">
                            </a>
                            <% } else { %>
                                <a href="#" type="button" onclick="logout()">
                                    <h11
                                        style="font-size: 20px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif">
                                        <strong>Logout</strong>
                                    </h11>
                                    <span class="iconify" data-icon="entypo:login" data-inline="false"
                                        style="font-size: 25px;">
                                </a>
                            <% } %>
                    </li>
                </ul>
            </div>
        </nav>
    </header>
    <!--#New, 연구원 데이터 등록-->
    <div class="modal fade" id="new" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
        style=" padding-left: 150px; padding-top: 120px;">
        <div class="modal-dialog">
            <div class="modal-content" style="width: 640px; height: 750px;">
                <div class="modal-header" style="height: 50px; text-align:center;">
                    New
                </div>
                <div class="modal-body">
                    <form method="POST" enctype="multipart/form-data" action="/alumniUpload" style="width:550px">
                        <div class="form-group">
        <%                  let new_member=['name','department' , 'Email' , 'YearOfAdmission' , 'YearOfGraduation','ResearchTopics','description'];
                            let placeholder_member = ['', '', 'ex) abc123 (at) gmail (dot) com', '', '','','- "-"을 입력하면 \n- 불릿기호가 생성됩니다. \n'];
                            for(let i=0; i<new_member.length; i++) {
        %>
                            <div style="margin-left:30px; width: 60px;">
                                <% if(i != new_member.length-1) { %>
                                <h13 style="margin-left: 30px;">
                                    <%=         new_member[i] + ':' %>
                                </h13>
                                <input class='<%=new_member[i]%>' name='<%=new_member[i]%>' id='<%=new_member[i]%>' style="margin-left:30px; width: 350px" value='' placeholder = '<%=placeholder_member[i]%>'/>
                                <% } else { %>
                                <h13 style="margin-left: 30px;">
                                    <%=         new_member[i] + '*:' %>
                                </h13>
                                    <textarea class='<%=new_member[i]%>' name='<%=new_member[i]%>' id='<%=new_member[i]%>' style="margin-left:30px; width: 500px; height: 70px; white-space: pre;" value='' placeholder = '<%=placeholder_member[i]%>'></textarea>
                                <% } %>
                            </div>
        <%                      }                                       %>
                        </div>
                        <div class="form-group">
                            <label for="file">파일찾기</label>
                            <input class="imgPath" style="width: 257px" readonly>
                            <input type="file" id="file" name="alumniUpload" style = "margin-left: 60px;" placeholder="파일 선택"/>
                            <a href="#" class="btn btn-primary ImagePrint" data-toggle="modal" data-target="#Image" type="button" >이미지 확인 </a>
                        </div>
                        <img id="ImgPrint" src = "" onerror="javascript:this.src='/img/default.png'" align="left" style="display:none; margin-left:60px; width:150px; height:150px;"/> 
                        <br><br><br><br>
                        <button type="reset" class="btn btn-default clear"  data-dismiss="modal" style="font-size: 16px;float:right; margin-left:5px">close</button>
                        <button type="submit" class="btn btn-primary" style="font-size: 16px;float:right;">Save</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!--#list, DB에서 조회-->
    <div class="modal fade" id="list" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
        style=" margin-left: -300px; padding-top: 70px;">
        <div class="modal-dialog">
            <div class="modal-content" style="margin-left: -120px; margin-top:-10px; width: 1300px; height: 800px;">
                <button type="submit" class="btn btn-default" data-dismiss="modal" style="float:right">Close</button>
                <div class="modal-header" style="height: 50px;">
                    <center style="font-size: 18px;">
                        <string>
                            Member list
                        </string>
                    </center>
                </div>
                <!-- <br> -->
                <table class="table table-hover memberTable" id="memberTable" style="margin-left: auto; margin-right: auto;">
                    <thread>
                        <tr>
                            <th>
                                <center>
                                    Num
                                </center>
                            </th>
                            <th>
                                <center>Name</center>
                            </th>
                            <th>
                                <center>Department</center>
                            </th>
                            <th>
                                <center>E-mail</center>
                            </th>
                            <th>
                                <center>YearOfAdmission</center>
                            </th>
                            <th>
                                <center>graduationYear</center>
                            </th>
                            <th>
                                <center>ResearchTopics</center>
                            </th>
                            <th>
                                <center>description</center>
                            </th>
                            <th>
                                <center>Edit</center>
                            </th>
                            <th>
                                <center>Delete</center>
                            </th>
                        </tr>
                    </thread>
                    <tbody>
<%                      for(let i=0; i<alumni_results.length; i++) {    %>
                            <tr>
                                <td>
                                    <center>
<%=                                     alumni_results[i][11]                                 %>
                                    </center>
                                </td>
                                <td style="width:70px">
                                    <center>
<%=                                     alumni_results[i][1]            %>
                                    </center>
                                </td>
                                <td style="width:130px">
                                    <center>
<%=                                     alumni_results[i][3]            %>
                                    </center>
                                </td>
                                <td style="width:140px">
                                    <center>
<%=                                     alumni_results[i][4]            %>
                                    </center>
                                </td>
                                <td style="width:50px">
                                    <center>
<%=                                     alumni_results[i][5]            %>
                                    </center>
                                </td>
                                <td style="width:50px">
                                    <center>
<%=                                     alumni_results[i][6]            %>
                                    </center>
                                </td>
                                <td style="width:180px">
                                    <center>
<%=                                     alumni_results[i][7]            %>
                                    </center>
                                </td>
                                <td style="width:300px">
                                    <center>
<%=                                     alumni_results[i][10]            %>
                                    </center>
                                </td>
                                <td>
                                    <center>
                                        <a href="#" class="btn btn-default updateBtn" data-toggle="modal"
                                            data-target="#edit" type="button">
                                            수정</a>
                                    </center>
                                </td>
                                <td>
                                    <center>
                                        <a type="button" class="btn btn-primary"
                                            onclick="alumni_delete('<%= alumni_results[i][1] %>'); javascript:rowDel(this)">
                                            삭제
                                        </a>
                                    </center>
                                </td>
                            </tr>
                            <% } %>
                    </tbody>
                </table>

                <br>
            </div> -->
        </div>
    </div>

    <!--   #list -> #edit   -->
    <div class="modal fade" id="edit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
        style=" padding-left: 70px; padding-top: 80px;">

        <div class="modal-dialog">
            <div class="modal-content" style="width: 660px; height: 810px;">
                <div class="modal-header" style="height: 50px;">
                    <center style="font-size: 18px;">Edit</center>
                </div>
                <div class="modal-body">
                    <form method="POST" enctype="multipart/form-data" action="/alumniUpdate" style="width:550px">
<%                  let edit_member=['number','name','department' , 'Email' , 'yearOfAdmission', 'graduationYear','researchTopics','description']; 
                    for(let i=0; i<edit_member.length; i++) { %>
                        <div style="margin-left:30px; width: 60px;">
                            <% if(i != edit_member.length-1) { %>
                            <h13 style="margin-left: 30px;">
                    <%=                                 edit_member[i] + ':'    %>
                            </h13>
                            <% } else { %>
                                <h13 style="margin-left: 30px;">
                    <%=                                 edit_member[i] + '*:'    %>
                                </h13>
                            <% } %>
                    <%                              if(i == 0) {            %>
                                <select class='number' name='number' id='number' style="margin-left: 30px;">
                                    <% for(let j=0; j<alumni_results.length; j++) { %>
                                        <option value='<%=j+1%>'><%=j+1%></option>
                                    <% } %> 
                                </select> 
                    <%                              } else if(i < edit_member.length-1){                %> 
                                <input class='<%=edit_member[i]%>' name='<%=edit_member[i]%>' id='<%=edit_member[i]%>' style="margin-left:30px; width: 350px" value=''/>
                    <%                              } else {                      %>
                                <textarea class='<%=edit_member[i]%>' name='<%=edit_member[i]%>' id='<%=edit_member[i]%>' style="margin-left:30px; width: 500px; height: 70px; white-space: pre;" value='' placeholder='- "-"을 입력하면 불릿기호가 생성됩니다.'></textarea>
                        <% } %>
                        </div>
                    <%                          }                               %>
                        <input type='hidden' name='beforeId' id='beforeId' value = '<%=edit_member[0]%>' style="margin-left:50px; width: 350px;"/>
                        <input type='hidden' name='beforeName' id='beforeName' value = '<%=edit_member[1]%>' style="margin-left:50px; width: 350px;"/>
                    </div>
                    <div class="form-group">
                        <label for="file2" >파일찾기</label>
                        <input class="imgPath2" style="width:257px" readonly>
                        <input type="file" name="alumniUpdate" id="file2" style="margin-left:60px" >
                        <a href="#" class="btn btn-primary ImagePrint2" data-toggle="modal" data-target="#Image" type="button" >이미지 확인 </a>
                    </div>
                    <img id="ImgPrint2" src = "" onerror="javascript:this.src='/img/default.png'" align="left" style="display:none; margin-left:60px; width:150px; height:150px;"/> 
                    <br><br><br><br>
                    <button type="reset" class="btn btn-default" data-dismiss="modal" style="font-size: 16px;float:right; margin-left:5px; margin-right:10px">close</button>
                    <button type="submit" class="btn btn-primary" style="font-size: 16px;float:right;">Save</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="wrapper row-offcanvas row-offcanvas-left">
        <aside class="left-side sidebar-offcanvas">
            <section class="sidebar">
                <div class="user-panel">
                    <div class="pull-left image">
                        <img src="../../img/logo_1.jpg" class="image" alt="User Image" />
                    </div>
                </div>
                <form action="#" method="get" class="sidebar-form"></form>
                <ul class="sidebar-menu">
                    <li>
                        <!-- <a href="/"> -->
                        <a class="menuSelect" id="Home" style="cursor:pointer; ">
                            <i class="fa fa-home" aria-hidden="true"></i>
                            <span>Home</span>
                        </a>
                    </li>
                    <li class="treeview">
                        <a href="#">
                            <i class="fa fa-user" aria-hidden="true"></i>
                            <span>Members</span>
                            <i class="fa fa-angle-left pull-right"></i>
                        </a>
                        <ul class="treeview-menu">
                            <li>
                                <a class="menuSelect" id="Professor" style="cursor:pointer; ">
                                    <i class="fa fa-angle-double-right">
                                    </i>
                                    Professor
                                </a>
                            </li>
                            <li>
                                <a class="menuSelect" id="Researcher" style="cursor:pointer; ">
                                    <i class="fa fa-angle-double-right">
                                    </i>
                                    Researcher
                                </a>
                            </li>
                            <li>
                                <a class="menuSelect" id="Alumni" style="cursor:pointer; ">
                                    <i class="fa fa-angle-double-right">
                                    </i>
                                    Alumni
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a class="menuSelect" id="Paper" style="cursor:pointer; ">
                            <i class="fa fa-file" aria-hidden="true"></i>
                            <span>Paper</span>
                        </a>
                    </li>
                    <li>
                        <a class="menuSelect" id="Others" style="cursor:pointer; ">
                            <i class="fa fa-plus-square" aria-hidden="true"></i>
                            <span>Others</span>
                        </a>
                    </li>
                    <li>
                        <a class="menuSelect" id="Activity" style="cursor:pointer; ">
                            <i class="fa fa-tasks fa-1x" aria-hidden="true"></i>
                            <span>Activity</span>
                        </a>
                    </li>
                    <li class="treeview">
                        <a class="menuSelect" href="#" style="cursor:pointer; ">
                            <i class="fa fa-share" aria-hidden="true"></i>
                            <span>Link</span>
                            <i class="fa fa-angle-left pull-right"></i>
                        </a>
                        <ul class="treeview-menu">
                            <% for(let i =0; i<iconInfo.length; i++) {%>
                                <li>
                                    <a class="menuSelect" href='<%=iconInfo[i][2]%>' target="_blank" id="<%=iconInfo[i][0]%>" style="cursor:pointer;">
                                        <i class="fa fa-angle-double-right"></i>
                                        <%=iconInfo[i][0]%>
                                    </a>
                                </li>
                            <% } %>
                            <% if(userInfo != null) { %>
                                <li>
                                    <a class="menuSelect" id="linkUpdate" style="cursor:pointer; ">
                                        <i class="fa fa-angle-double-right"></i>
                                        Edit
                                    </a>
                                </li>
                            <% } %>
                        </ul>
                    </li>
                </ul>
                <div>
                </div>
            </section>
        </aside>
        <aside class="right-side" style="margin-left: 220px; margin-top: 30px;">
        <div class="content-header" style="height:30px">
            <h1>alumni
<%              if(userInfo!=null) { %>
                <a href="#" data-toggle="modal" data-target="#list" type="button" class="btn btn-default" style="float:right; height: 35px; margin: 0px 3px 3px 0px;">
                    <h14 style="font-size: 15px;">
                        Edit
                    </h14>
                </a>
                <a href="#" data-toggle="modal" data-target="#new" type="button" class="btn btn-primary" style="float:right; height: 35px; margin: 0px 3px 3px 0px;">
                    <h14 style="font-size: 15px;">
                        New
                    </h14>
                </a>
<%              }                    %>
            </h1>
        </div>
        <section class="content">
            <div class="row" style="padding-left: 12px;">
                <div class="box box-info">
                    <div class="box-header">
                    </div>
<%                  for(let i=0; i<alumni_results.length; i++) {        %>
                        <div class="box-body" style="height: 200px;">
                            <img src = <%="/img/" +alumni_results[i][1] + ".jpg" %> onerror="javascript:this.src='/img/default.png'" align="left" style="width:160px; height:187px;"/>
                            <div class="alumniName">
                                <h10>
                                    <strong>
    <%=                                 alumni_results[i][1]                %>
                                    </strong>
                                </h10>
                            </div>
                            <li>
                                Department : <%= alumni_results[i][3]%>
                            </li>
                            <% 
                            var desciptionList = [];
                            if(alumni_results[i][10] != null) {
                                 if(alumni_results[i][10].includes("-")) {
                                     desciptionList = alumni_results[i][10].split("-");
                                 }
                             }
                         %>

                         <% 
                             if(alumni_results[i][10] != null) {
                                 if(alumni_results[i][10].length > 0) {
                                     if(desciptionList.length > 0) {
                                         for(let j = 1 ; j<desciptionList.length; j++) { 
                         %>
                                             <li>
                                                 <%= desciptionList[j] %>
                                             </li>
                         <%              } %>
                         <%              if(desciptionList.length == 4) {%>
                                            <li>
                                                Research Topics : <%= alumni_results[i][7] %>
                                            </li>
                         <%              } else if(desciptionList.length == 3){ %>
                                            <li>
                                                Research Topics : <%= alumni_results[i][7] %>
                                            </li>
                                            <br>
                         <%              } else if(desciptionList.length == 2){ %>
                                            <li>
                                                Research Topics : <%= alumni_results[i][7] %>
                                            </li>
                         <%                  for(let a = 0; a<2; a++) { %>
                                                 <br>
                         <%                  } %>
                         <%              } else if(desciptionList.length == 1){ %>
                                            <li>
                                                Research Topics : <%= alumni_results[i][7] %>
                                            </li>
                         <%                  for(let a = 0; a<3; a++) { %>
                                                 <br>
                                         <%  } %>
                         <%              } %>          
                         <%          } else { %>
                                             <li>
                                                 <%= alumni_results[i][10] %>
                                             </li>
                                             <br><br><br>
                         <%          }   %>                                                
                         <%      } else { %>
                                    <li>
                                        Research Topics : <%= alumni_results[i][7] %>
                                    </li>
                                     <pre style="width: 500px; height: 70px; border:none; background-color: white; white-space: pre-line; font-size: 16px; font-family: none;">
                                         <%= // 업데이트 등 수정하다가 공백으로 되어 있을 때 %>
                                     </pre>
                         <%      } %>
                         
                         <% } else { %>
                                <li>
                                    Research Topics : <%= alumni_results[i][7] %>
                                </li>
                                 <pre style="width: 500px; height: 70px; border:none; background-color: white; white-space: pre-line; font-size: 16px; font-family: none;">
                                     <%= // 아예 null 값%>
                                 </pre>
                         <% } %>
                         <button class="<%="memberName"+alumni_results[i][1]%>" style="border: 0; outline:0; height: 32px; color: black; font-size:14px;" >
                            실적보기
                        </button>
                    </div>
                    <div class="<%="performance"+alumni_results[i][1]%>">
                    </div>
                    <%                  } %>
                    <a href="#" class="top" style="position: fixed; left:95%; bottom:50px; display:none; font-size:30px; color:black">
                        <i class="fas fa-arrow-up"></i>
                    </a>
                </div>
            </div>
        </section>
    </aside>

</body>

</html>