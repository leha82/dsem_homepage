<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>DSEM Lab.</title>
    <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
    <link href="/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <link href="/css/AdminLTE.css" rel="stylesheet" type="text/css" />
    <script src="/js/iconify.min.js"></script>
    <script src="/js/jquery.min.js"></script>
    <script src="/js/jquery-ui-1.10.3.min.js" type="text/javascript"></script>
    <script src="/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="/js/AdminLTE/app_homepage.js" type="text/javascript"></script>
    <script src="/js/function.js"></script>
    <script src="https://use.fontawesome.com/releases/v5.15.4/js/all.js" data-auto-a11y="true"></script>
    <script>
        $(document).ready(function() {
            $("#login-form").keypress(function (e) {
                if(e.keyCode == 13) {
                    login();
                }
            });
    });
    </script>
    <!-- 삭제할 때 테이블의 해당 행 삭제되어 보이도록 함 -->
    <script>
        $(document).ready(function() {
            function rowDel(obj) {
                var Del_tr = obj.parentNode.parentNode.parentNode;
                console.log(Del_tr);
                Del_tr.parentNode.removeChild(Del_tr);
            }
        });
    </script>

    <!-- Journal, Conference 클릭 시 -->
    <script>
        $(document).ready(function() {
            $(".new_journalBtn").click(function() {
                document.getElementById('new_journal').className = 'btn btn-primary new_journalBtn';
                document.getElementById('new_conference').className = 'btn btn-default new_conferenceBtn';
                document.getElementById('journal_select').style.display = 'block';
                document.getElementById('conference_select').style.display = 'none';
            });
            $(".new_conferenceBtn").click(function() {
                document.getElementById('new_journal').className = 'btn btn-default new_journalBtn';
                document.getElementById('new_conference').className = 'btn btn-primary new_conferenceBtn';
                document.getElementById('journal_select').style.display = 'none';
                document.getElementById('conference_select').style.display = 'block';
            });

            $(".list_journalBtn").click(function() {
                document.getElementById('list_journal').className = 'btn btn-primary list_journal';
                document.getElementById('list_conference').className = 'btn btn-default list_conference';
                document.getElementById('journalTable').style.display = 'block';
                document.getElementById('conferenceTable').style.display = 'none';
            });
            $(".list_conferenceBtn").click(function() {
                document.getElementById('list_journal').className = 'btn btn-default list_journal';
                document.getElementById('list_conference').className = 'btn btn-primary list_conference';
                document.getElementById('journalTable').style.display = 'none';
                document.getElementById('conferenceTable').style.display = 'block';
            });
        });
    </script>
    <!--  updateBtn -->
    <script>
        $(document).ready(function() {
            var paperInfo = [];
            $(".journal_updateBtn").click(function() {
                var journal_updateBtn = $(this);

                var tr = journal_updateBtn.parent().parent().parent();
                var td = tr.children();

                td.each(function(i) {
                    paperInfo[i] = td.eq(i).text().trim();
                })
                $("input[name=number]").attr('value', paperInfo[0]);
                $("input[name=year]").attr('value', paperInfo[1]);
                $("input[name=part]").attr('value', paperInfo[2]);
                $("input[name=date]").attr('value', paperInfo[3]);
                $("input[name=authors]").attr('value', paperInfo[4]);
                $("input[name=title]").attr('value', paperInfo[5]);
                $("input[name=journal_name]").attr('value', paperInfo[6]);
                $("input[name=other]").attr('value', paperInfo[7]);
                $("input[name=ISSN]").attr('value', paperInfo[8]);
                $("input[name=paper_index]").attr('value', paperInfo[9]);
                $("input[name=IF_]").attr('value', paperInfo[10]);
                $("input[name=found_]").attr('value', paperInfo[11]);
                $("input[name=doi]").attr('value', paperInfo[12]);
            });
            $(".conference_updateBtn").click(function() {
                var conference_updateBtn = $(this);

                var tr = conference_updateBtn.parent().parent().parent();
                var td = tr.children();

                td.each(function(i) {
                    paperInfo[i] = td.eq(i).text().trim();
                })
                $("input[name=number]").attr('value', paperInfo[0]);
                $("input[name=year]").attr('value', paperInfo[1]);
                $("input[name=part]").attr('value', paperInfo[2]);
                $("input[name=date]").attr('value', paperInfo[3]);
                $("input[name=authors]").attr('value', paperInfo[4]);
                $("input[name=title]").attr('value', paperInfo[5]);
                $("input[name=proceeding]").attr('value', paperInfo[6]);
                $("input[name=ISSN]").attr('value', paperInfo[7]);
                $("input[name=place]").attr('value', paperInfo[8]);
                $("input[name=found]").attr('value', paperInfo[9]);
                $("input[name=remarks]").attr('value', paperInfo[10]);
            });
        });
    </script>
    <script>
        $(document).ready(function() {
            $(window).scroll( function() {
                if ($( this).scrollTop() > 200 ) {
                    $('.top').fadeIn();
                } else {
                    $('.top').fadeOut();
                }
            });
            $('.top').click( function() {
                $('html, body').animate({scrollTop : 0}, 400);
                return false;
            });
        });
    </script>
    <!-- 페이지 로딩될 때 탭 #All은 항상 데이터 띄워주기 -->
    <!-- <script>
        $(document).ready(function() {
            $('All').attr('class', 'tab-pane active All');
        });
    </script> -->
    <script>
        $(document).on('click', '.menuSelect', function () {
            // id_value = $(this).attr("id");
            if($(this).attr("id") == "Home") {
                location.href = "/"
            } else if ($(this).attr("id") == "Professor") {
                location.href = "../members/professor"
                //$("#row").load("/members/Professor");
            } else if ($(this).attr("id") == "Researcher") {
                location.href = "../members/researcher"
                //$("#row").load("/members/researcher");
            } else if ($(this).attr("id") == "Alumni") {
                location.href = "../members/alumni"
                //$("#row").load("/members/alumni");
            } else if ($(this).attr("id") == "Paper") {
                location.href = "../paper/paper"
                //$("#row").load("/paper/paper");
            } else if ($(this).attr("id") == "Others") {
                location.href = "../others/others"
                //$("#row").load("/others/others");
            } else if ($(this).attr("id") == "Activity") {
                location.href = "../activity/activity";
                //$("#row").load("/activity/activity");
            } else if ($(this).attr("id") == "linkUpdate") {
                location.href = "../link/linkEdit";
                //$("#row").load("/link/linkEdit");
            }
        });
    </script>
</head>
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
    style=" padding-left: 230px; padding-top: 150px;">
    <div class="modal-dialog">
        <div class="modal-content" style="width: 400px;">
            <div class="login-form" id="login-form">
                <h1>Login</h1>
                <input type="text" id='uId' name="username" placeholder="Username" required>
                <input type="password" id='uPw' name="password" placeholder="Password" required>
                <input type="submit" onclick="login()" value="Login">
            </div>

            <div class="modal-footer">
                <button type="submit" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<body class="skin-black">
    <header class="header">
        <a href="/" class="logo">
            <br>Data Semantics Lab.
        </a>
        <nav class="navbar navbar-static-top" role="navigation">
            <div class="navbar-right">
                <ul class="nav navbar-nav">
                    <li id='loginBtn'>
                        <% if(userInfo==null){ %>
                            <a href="#" data-toggle="modal" data-target="#myModal" type="button">
                                <h11
                                    style="font-size: 20px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif">
                                    <strong>Login</strong>
                                </h11>
                                <span class="iconify" data-icon="entypo:login" data-inline="false"
                                    style="font-size: 25px;">
                            </a>
                            <% } else { %>
                                <a href="#" type="button" onclick="logout()">
                                    <h11
                                        style="font-size: 20px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif">
                                        <strong>Logout</strong>
                                    </h11>
                                    <span class="iconify" data-icon="entypo:login" data-inline="false"
                                        style="font-size: 25px;">
                                </a>
                            <% } %>
                    </li>
                </ul>
            </div>
        </nav>
    </header>
    <%
                                // DB 데이터 배열에 담기
        let year = ['All']; // 존재하는 논문의 년도
        for(let i =0; i<paper_results.length; i++) {
            for(let j =0; j<paper_results[i].length; j++) {
                if(year.includes(paper_results[i][j][1])) { 
                    continue;
                } else {
                    year.push(paper_results[i][j][1]);                                    
                }
            }
        }
        year.sort();
        year.reverse();

        let IJ = [], DJ = [], IC = [], DC = [];
        for(let i =0; i<paper_results.length; i++) {
            for(let j =0; j<paper_results[i].length; j++) { 
                if(paper_results[i][j][2] == 'IJ') {                                                
                    IJ.push(paper_results[i][j]);
                } else if(paper_results[i][j][2] == 'DJ') {
                    DJ.push(paper_results[i][j]);
                } else if(paper_results[i][j][2] == 'IC') {
                    IC.push(paper_results[i][j]);
                } else if(paper_results[i][j][2] == 'DC') {
                    DC.push(paper_results[i][j]);
                }              
            }
        }
%>
        <!-- #New, 논문-->
        <div class="modal fade" id="new" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style=" padding-left: 150px; padding-top: 20px;">
            <div class="modal-dialog">
                <div class="modal-content" style="width: 600px; height: 865px;">
                    <div class="modal-header" style="height: 50px; text-align:center; font-size:18px;">
                        New
                    </div>
                    &nbsp;
                    <button type="submit" class="btn btn-primary new_journalBtn" id="new_journal">Journal</button>
                    <button type="submit" class="btn btn-default new_conferenceBtn" id="new_conference">Conference</button>
                    <div class="modal-body">
                        <div class="journalView" id="journal_select" style="display:block">
                        <%  let new_journal=['year','part','date','authors','title','journal_name','other','ISSN','paper_index','IF_','found_','doi'];
                            let new_journal_placeholder = ['','ex) IJ or DJ','','','','','','','','','',''];
                        for(let i=0; i<new_journal.length; i++) {
%>
                                <div style="margin-right: 10px; margin-left:50px; width: 60px;">
                                    <h13 style="margin-left: 50px;">
                                        <%=                                 new_journal[i] + ':' %>
                                    </h13>
                                    <input style="margin-left:50px; width: 350px" id='<%= 'journalInsert_' + new_journal[i]%>' placeholder = '<%=new_journal_placeholder[i]%>' />
                                </div>
                                <%                      }           %>
                                    <br>
                                    <button type="submit" class="btn btn-default" data-dismiss="modal" style="float:right" onclick="close()">Close</button>
                                    <button type="submit" class="btn btn-primary" data-dismiss="modal" style="float:right" onclick="journal_insert();"> Save</button>
                        </div>
                        <div class="conferenceView" id="conference_select" style="display:none">
                            <%  let new_conference=['year','part','date','authors','title','proceeding','ISSN','place','found','remarks'];
                            let new_confereence_placeholder = ['','ex) IC or DC','','','','','','','','','',''];
                        for(let i=0; i<new_conference.length; i++) {
%>
                                <div style="margin-right: 10px; margin-left:50px; width: 60px;">
                                    <h13 style="margin-left: 50px;">
                                        <%=                                 new_conference[i] + ':' %>
                                    </h13>
                                    <input style="margin-left:50px; width: 350px" id='<%= 'conferenceInsert_' + new_conference[i]%>' placeholder = '<%= new_confereence_placeholder[i]%>'/>
                                </div>
                                <%                      }           %>
                                    <div style="line-height:187%">
                                        <br><br><br><br>
                                    </div>
                                    <br>
                                    <button type="submit" class="btn btn-default" data-dismiss="modal" style="float:right" onclick="close()">Close</button>
                                    <button type="submit" class="btn btn-primary" data-dismiss="modal" style="float:right" onclick="conference_insert();"> Save</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!--#list, DB에서 조회-->
        <div class="modal fade" id="list" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style=" margin-left: -1210px; padding-top: 40px; ">
            <div class="modal-dialog modal-lg modal-dialog-scrollable">
                <div class="modal-content" style="width: 1830px; height: 800px;">
                    <button type="submit" class="btn btn-default" data-dismiss="modal" style="float:right">Close</button>
                    <div class="modal-header" style="height: 50px;">
                        <center style="font-size: 18px;">
                            <string>
                                Paper list
                            </string>
                        </center>
                    </div>
                    &nbsp;
                    <button type="submit" class="btn btn-primary list_journalBtn" id="list_journal">Journal</button>
                    <button type="submit" class="btn btn-default list_conferenceBtn" id="list_conference">Conference</button>
                    <br>
                    <div style="width: 1820px; height:700px; overflow: auto; font-size: 15px;  position:fixed;">
                        <table class="table table-hover memberTable" id="journalTable" style="display:block;">
                            <thread>
                                <tr style="width:auto;">
                                    <th>
                                        <center>
                                            Number
                                        </center>
                                    </th>
                                    <th>
                                        <center>year</center>
                                    </th>
                                    <th>
                                        <center>part</center>
                                    </th>
                                    <th>
                                        <center>date</center>
                                    </th>
                                    <th>
                                        <center>authors</center>
                                    </th>
                                    <th>
                                        <center>title</center>
                                    </th>
                                    <th>
                                        <center>journal_name</center>
                                    </th>
                                    <th>
                                        <center>other</center>
                                    </th>
                                    <th>
                                        <center>ISSN</center>
                                    </th>
                                    <th>
                                        <center>paper_index</center>
                                    </th>
                                    <th>
                                        <center>IF_</center>
                                    </th>
                                    <th>
                                        <center>found_</center>
                                    </th>
                                    <th>
                                        <center>doi</center>
                                    </th>
                                    <th>
                                        <center>Edit</center>
                                    </th>
                                    <th>
                                        <center>Delete</center>
                                    </th>
                                </tr>
                            </thread>
                            <tbody>
                                <%  for(let i=0; i<paper_results[0].length; i++) {    %>
                                    <tr style="width:auto;">
                                        <td>
                                            <center>
                                                <%=                                     paper_results[0][i][0]                                 %>
                                            </center>
                                        </td>
                                        <td>
                                            <center>
                                                <%=                                     paper_results[0][i][1]           %>
                                            </center>
                                        </td>
                                        <td>
                                            <center>
                                                <%=                                     paper_results[0][i][2]          %>
                                            </center>
                                        </td>
                                        <td>
                                            <center>
                                                <%=                                    paper_results[0][i][3]            %>
                                            </center>
                                        </td>
                                        <td>
                                            <center>
                                                <%=                                    paper_results[0][i][4]      %>
                                            </center>
                                        </td>
                                        <td>
                                            <center>
                                                <%=                                     paper_results[0][i][5]        %>
                                            </center>
                                        </td>
                                        <td>
                                            <center>
                                                <%=                                    paper_results[0][i][6]      %>
                                            </center>
                                        </td>
                                        <td>
                                            <center>
                                                <%=                                    paper_results[0][i][7]      %>
                                            </center>
                                        </td>
                                        <td>
                                            <center>
                                                <%=                                    paper_results[0][i][8]      %>
                                            </center>
                                        </td>
                                        <td>
                                            <center>
                                                <%=                                     paper_results[0][i][9]     %>
                                            </center>
                                        </td>
                                        <td>
                                            <center>
                                                <%=                                     paper_results[0][i][10]     %>
                                            </center>
                                        </td>
                                        <td>
                                            <center>
                                                <%=                                    paper_results[0][i][11]      %>
                                            </center>
                                        </td>
                                        <td>
                                            <center>
                                                <%=                                    paper_results[0][i][12]       %>
                                            </center>
                                        </td>
                                        <td>
                                            <center>
                                                <a href="#" class="btn btn-default journal_updateBtn" data-toggle="modal" data-target="#journal_edit" type="button">
                                            수정</a>
                                            </center>
                                        </td>
                                        <td>
                                            <center>
                                                <a type="button" class="btn btn-primary" onclick="journal_delete('<%= paper_results[0][i][5] %>'); javascript:rowDel(this)">
                                            삭제
                                        </a>
                                            </center>
                                        </td>
                                    </tr>
                                    <% } %>
                            </tbody>
                        </table>
                        <table class="table table-hover memberTable" id="conferenceTable" style="display:none;">
                            <thread>
                                <tr style="width:auto;">
                                    <th>
                                        <center>
                                            Number
                                        </center>
                                    </th>
                                    <th>
                                        <center>year</center>
                                    </th>
                                    <th>
                                        <center>part</center>
                                    </th>
                                    <th>
                                        <center>date</center>
                                    </th>
                                    <th>
                                        <center>authors</center>
                                    </th>
                                    <th>
                                        <center>title</center>
                                    </th>
                                    <th>
                                        <center>proceeding</center>
                                    </th>
                                    <th>
                                        <center>ISSN</center>
                                    </th>
                                    <th>
                                        <center>place</center>
                                    </th>
                                    <th>
                                        <center>found</center>
                                    </th>
                                    <th>
                                        <center>remarks</center>
                                    </th>
                                    <th>
                                        <center>Edit</center>
                                    </th>
                                    <th>
                                        <center>Delete</center>
                                    </th>
                                </tr>
                            </thread>
                            <tbody>
                                <%                      for(let i=0; i<paper_results[1].length; i++) {    %>
                                    <tr style="width:auto;">
                                        <td>
                                            <center>
                                                <%=                                     paper_results[1][i][0]                                %>
                                            </center>
                                        </td>
                                        <td>
                                            <center>
                                                <%=                                     paper_results[1][i][1]           %>
                                            </center>
                                        </td>
                                        <td>
                                            <center>
                                                <%=                                     paper_results[1][i][2]          %>
                                            </center>
                                        </td>
                                        <td>
                                            <center>
                                                <%=                                    paper_results[1][i][3]            %>
                                            </center>
                                        </td>
                                        <td>
                                            <center>
                                                <%=                                    paper_results[1][i][4]      %>
                                            </center>
                                        </td>
                                        <td>
                                            <center>
                                                <%=                                     paper_results[1][i][5]        %>
                                            </center>
                                        </td>
                                        <td>
                                            <center>
                                                <%=                                    paper_results[1][i][6]      %>
                                            </center>
                                        </td>
                                        <td>
                                            <center>
                                                <%=                                    paper_results[1][i][7]      %>
                                            </center>
                                        </td>
                                        <td>
                                            <center>
                                                <%=                                    paper_results[1][i][8]      %>
                                            </center>
                                        </td>
                                        <td>
                                            <center>
                                                <%=                                     paper_results[1][i][9]     %>
                                            </center>
                                        </td>
                                        <td>
                                            <center>
                                                <%=                                     paper_results[1][i][10]     %>
                                            </center>
                                        </td>
                                        <td>
                                            <center>
                                                <a href="#" class="btn btn-default conference_updateBtn" data-toggle="modal" data-target="#conference_edit" type="button">
                                            수정</a>
                                            </center>
                                        </td>
                                        <td>
                                            <center>
                                                <a type="button" class="btn btn-primary" onclick="conference_delete('<%= paper_results[1][i][5] %>'); javascript:rowDel(this)">
                                            삭제
                                        </a>
                                            </center>
                                        </td>
                                    </tr>
                                    <% } %>
                            </tbody>
                        </table>
                    </div>

                    <br>
                </div> -->
            </div>
        </div>
        <!--   #list -> #edit   -->
        <div class="modal fade" id="journal_edit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style=" padding-left: 60px; padding-top: 0px;">
            <div class="modal-dialog">
                <div class="modal-content" style="width: 600px; height: 890px;">
                    <div class="modal-header" style="height: 50px; text-align:center; font-size:18px;">
                        Journal Edit
                    </div>
                    <div class="modal-body">
                        <%  let edit_journal=['number','year','part','date','authors','title','journal_name','other','ISSN','paper_index','IF_','found_','doi'];
                    for(let i=0; i<edit_journal.length; i++) { 
%>
                            <div style="margin-right: 10px; margin-left:50px; width: 60px;">
                                <h13 style="margin-left: 50px;">
                                    <%=                             edit_journal[i] + ':'    %>
                                </h13>
                                <%                              if(i == 0) {            %>
                                    <input type='text' name='<%=edit_journal[i]%>' id='<%='journalUpdate_' + edit_journal[i]%>'value='' style="margin-left:50px; width: 350px;" readonly/>
                                    <%                              } else {                %>
                                        <input type='text' name='<%=edit_journal[i]%>' id='<%='journalUpdate_' + edit_journal[i]%>'value='' style="margin-left:50px; width: 350px" />
                                        <%                              }                       %>
                            </div>
                            <%                  }                               %>
                                <br>
                                <button type="submit" class="btn btn-default" data-dismiss="modal" style="float:right">Close</button>
                                <button type="submit" class="btn btn-primary" data-dismiss="modal" style="float:right" onclick="journal_update()">Save</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="conference_edit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style=" padding-left: 60px; padding-top: 0px;">
            <div class="modal-dialog">
                <div class="modal-content" style="width: 600px; height: 890px;">
                    <div class="modal-header" style="height: 50px; text-align:center; font-size:18px;">
                        Conference Edit
                    </div>
                    <div class="modal-body">
                        <%                  let edit_conference=['number','year','part','date','authors','title','proceeding','ISSN','place','found','remarks']; 
                    for(let i=0; i<edit_conference.length; i++) { 
%>
                            <div style="margin-right: 10px; margin-left:50px; width: 60px;">
                                <h13 style="margin-left: 50px;">
                                    <%=                             edit_conference[i] + ':'    %>
                                </h13>
                                <%                              if(i == 0) {            %>
                                    <input type='text' name='<%=edit_conference[i]%>' id='<%='conferenceUpdate_' + edit_conference[i]%>'value='' style="margin-left:50px; width: 350px;" readonly/>
                                    <%                              } else {                %>
                                        <input type='text' name='<%=edit_conference[i]%>' id='<%='conferenceUpdate_' + edit_conference[i]%>'value='' style="margin-left:50px; width: 350px" />
                                        <%                              }                       %>
                            </div>
                            <%                  }                               %>
                                <div style="line-height:187%">
                                    <br><br><br><br>
                                </div>
                                <br>
                                <button type="submit" class="btn btn-default" data-dismiss="modal" style="float:right">Close</button>
                                <button type="submit" class="btn btn-primary" data-dismiss="modal" style="float:right" onclick="conference_update()">Save</button>
                    </div>
                </div>
            </div>
        </div>




        <!--#Edit-->
        <div class="modal fade" id="edit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style=" padding-left: 150px; padding-top: 120px;">
            <div class="modal-dialog">
                <div class="modal-content" style="width: 600px; height: 670px;">
                    <div class="modal-header" style="height: 40px;">
                        <center style="font-size: 18px;">Edit</center>
                    </div>
                    <% let edit=['name', 'department' , 'laboratory' , 'email' , 'location' , 'research' ]; for(let i=0;
                    i<edit.length; i++) { %>
                        <div style="margin-right: 10px; margin-left:50px; width: 60px;">
                            <h13>
                                <%= edit[i] + ':' %>
                            </h13>
                            <input style="margin-left:50px; width: 350px;" id='<%= edit[i]%>' />
                        </div>
                        <br>
                        <% } %>
                </div> -->
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary" data-dismiss="modal" onclick="save()">Save</button>
                    <button type="submit" class="btn btn-default" data-dismiss="modal" onclick="close()">Close</button>
                </div>
            </div>
        </div>
        <div class="wrapper row-offcanvas row-offcanvas-left">
            <aside class="left-side sidebar-offcanvas">
                <section class="sidebar">
                    <div class="user-panel">
                        <div class="pull-left image">
                            <img src="../../img/logo_1.jpg" class="image" alt="User Image" />
                        </div>
                    </div>
                    <form action="#" method="get" class="sidebar-form"></form>
                    <ul class="sidebar-menu">
                        <li>
                            <!-- <a href="/"> -->
                            <a class="menuSelect" id="Home" style="cursor:pointer; ">
                                <i class="fa fa-home" aria-hidden="true"></i>
                                <span>Home</span>
                            </a>
                        </li>
                        <li class="treeview">
                            <a href="#">
                                <i class="fa fa-user" aria-hidden="true"></i>
                                <span>Members</span>
                                <i class="fa fa-angle-left pull-right"></i>
                            </a>
                            <ul class="treeview-menu">
                                <li>
                                    <a class="menuSelect" id="Professor" style="cursor:pointer; ">
                                        <i class="fa fa-angle-double-right">
                                        </i>
                                        Professor
                                    </a>
                                </li>
                                <li>
                                    <a class="menuSelect" id="Researcher" style="cursor:pointer; ">
                                        <i class="fa fa-angle-double-right">
                                        </i>
                                        Researcher
                                    </a>
                                </li>
                                <li>
                                    <a class="menuSelect" id="Alumni" style="cursor:pointer; ">
                                        <i class="fa fa-angle-double-right">
                                        </i>
                                        Alumni
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <a class="menuSelect" id="Paper" style="cursor:pointer; ">
                                <i class="fa fa-file" aria-hidden="true"></i>
                                <span>Paper</span>
                            </a>
                        </li>
                        <li>
                            <a class="menuSelect" id="Others" style="cursor:pointer; ">
                                <i class="fa fa-plus-square" aria-hidden="true"></i>
                                <span>Others</span>
                            </a>
                        </li>
                        <li>
                            <a class="menuSelect" id="Activity" style="cursor:pointer; ">
                                <i class="fa fa-tasks fa-1x" aria-hidden="true"></i>
                                <span>Activity</span>
                            </a>
                        </li>
                        <li class="treeview">
                            <a class="menuSelect" href="#" style="cursor:pointer; ">
                                <i class="fa fa-share" aria-hidden="true"></i>
                                <span>Link</span>
                                <i class="fa fa-angle-left pull-right"></i>
                            </a>
                            <ul class="treeview-menu">
                                <% for(let i =0; i<iconInfo.length; i++) {%>
                                    <li>
                                        <a class="menuSelect" href='<%=iconInfo[i][2]%>' target="_blank" id="<%=iconInfo[i][0]%>" style="cursor:pointer;">
                                            <i class="fa fa-angle-double-right"></i>
                                            <%=iconInfo[i][0]%>
                                        </a>
                                    </li>
                                <% } %>
                                <% if(userInfo != null) { %>
                                    <li>
                                        <a class="menuSelect" id="linkUpdate" style="cursor:pointer; ">
                                            <i class="fa fa-angle-double-right"></i>
                                            Edit
                                        </a>
                                    </li>
                                <% } %>
                            </ul>
                        </li>
                    </ul>
                    <div>
                    </div>
                </section>
            </aside>
            <aside class="right-side" style="margin-left: 220px; margin-top: 30px;">
            <div class="content-header" style="height: 30px;">
                <h1>Paper
                    <%  if(userInfo!=null) {     %>
                        &nbsp;
                        <a href="#" data-toggle="modal" data-target="#list" type="button" class="btn btn-default" id="EditBtn" style="float:right; height: 35px; margin: 0px 3px 3px 0px;">
                            <h14 style="font-size: 15px;">
                                Edit
                            </h14>
                        </a>
                        <a href="#" data-toggle="modal" data-target="#new" type="button" class="btn btn-primary" id="NewBtn" style="float:right; height: 35px; margin: 0px 3px 3px 0px;">
                            <h14 style="font-size: 15px;">
                                New
                            </h14>
                        </a>
                        <%              }                    %>
                </h1>
            </div>
            <section class="content" style="width: 99%;">
                <div class="row" style="padding-left: 12px;">
                    <div class="box box-info" style="margin-left: 3px;">
                        <div class="box-header">
                        </div>
                        <div class="box-body">
                            <div class="nav-tabs-custom">
                                <ul class="nav nav-tabs">
<%                                  for(let i =0; i<year.length; i++) {                 
                                        if(i == 0) { %>
                                            <li class="nav-item active">
                                                <a class="nav-link" href="<%="#"+year[i]%>" data-toggle="tab" id="<%="#"+year[i]%>">
                                                    <%= year[i]%>
                                                </a>
                                            </li>
<%                                      } else { %>
                                            <li class="nav-item">
                                                <a class="nav-link" href="<%="#"+year[i]%>" data-toggle="tab" id="<%="#"+year[i]%>">
                                                    <%= year[i]%>
                                                </a>
                                            </li>
<%                                      }                                                   %>
<%                                  }                                                   %>
                                </ul>
                            </div>
                            <div class="tab-content">
                                <% 
                                    function regularExpression(str) {
                                        str = str.replace(/,{2,}/gi, ",");
                                        str = str.replace(".,",",");
                                        str = str.replace(/,\s{1,}/gi, ", ");
                                        str = str.replace(/, ,{1,}/gi, "");
                                        str = str.replace(/,\s*$/, "");

                                        return str; 
                                }
                                %>
<%                              for(let i =0; i<year.length; i++) {                 %>
<%                                  if(i == 0) {                                    %>
                                        <div class="tab-pane active" id="<%=year[i]%>">
                                                <p style="font-size:20px;">&bull;&nbsp;<strong>International Journal</strong></p>
                                                <li style="font-size: 16px; font-weight: 500; list-style: none;">
                                                    <%                                
                                                    var setCount = IJ.length;           
                                                    for(let j = IJ.length-1; j>=0; j--) { 
                                                        str = '';
                                                        for(let k = 3; k<IJ[j].length-5; k++) { 
                                                            str += IJ[j][k] + ", ";
                                                        }
                                                        str = regularExpression(str);
                                                    %>
                                                        <%= Math.abs(j-setCount) + ". " + str%>
                                                        <br>
                                                        <h11><%="ISSN: " + IJ[j][8] + ", "%></h11>
                                                        <a href="<%=IJ[j][12]%>" target="_blank">
                                                            <%= IJ[j][12]%>
                                                        </a>
                                                        <br><br>
                                                    <% } %>
                                                </li>
                                                <p style="font-size:20px;">&bull;&nbsp;<strong>Domestic Journal</strong></p>
                                                <li style="font-size: 16px; font-weight: 500; list-style: none;">
                                                    <%
                                                    var setCount = DJ.length;                                                
                                                    for(let j =DJ.length-1; j>=0; j--) { 
                                                        str = '';
                                                        for(let k = 3; k<DJ[j].length-5; k++) {
                                                            str += DJ[j][k] + ", ";
                                                        }
                                                        str = regularExpression(str);  
                                                    %>
                                                        <%= Math.abs(j-setCount) + ". " + str%>
                                                        <br>
                                                        <h11><%="ISSN: " + DJ[j][8] + ", "%></h11>
                                                        <a href="<%=DJ[j][12]%>" target="_blank">
                                                            <%= DJ[j][12]%>
                                                        </a>
                                                        <br><br>                     
                                                    <% } %>
                                                </li>
                                                <p style="font-size:20px;">&bull;&nbsp;<strong>International Conference</strong></p>
                                                <li style="font-size: 16px; font-weight: 500; list-style: none;">
                                                    <%         
                                                    var setCount = IC.length;                                         
                                                    for(let j =IC.length-1; j>=0; j--) { 
                                                        str = '';
                                                        for(let k = 3; k<IC[j].length-2; k++) {
                                                            if(k == 3) {
                                                                str += IC[j][k].slice(0,11) + ", ";
                                                            } else {
                                                                str += IC[j][k] + ", ";
                                                            }
                                                        }
                                                        str = regularExpression(str);
                                                    %>
                                                        <%= Math.abs(j-setCount) + ". " + str%>
                                                        <br><br>
                                           <%         }                               %>
                                                </li>
                                                <p style="font-size:20px;">&bull;&nbsp;<strong>Domestic Conference</strong></p>
                                                <li style="font-size: 16px; font-weight: 500; list-style: none;">
                                                    <%             
                                                    var setCount = DC.length;                                     
                                                    for(let j =DC.length-1; j>=0; j--) { 
                                                        str = '';
                                                        for(let k =3; k<DC[j].length-2; k++) {
                                                            if(k == 3) {
                                                                str += DC[j][k].slice(0,11) + ", ";
                                                            } else {
                                                                str += DC[j][k] + ", ";
                                                            }
                                                        }
                                                        str = regularExpression(str);
                                                    %>
                                                        <%= Math.abs(j-setCount) + ". " + str%>
                                                        <%= ", " + DC[j][10]%>
                                                        <br><br>
                                  <%                  }                           %>
                                                </li>
                                        </div>
<%                                  } else {                                                 %>
                                        <div class="tab-pane" id="<%=year[i]%>">
                                            <p style="font-size:20px;">&bull;&nbsp;<strong>International Journal</strong></p>
                                            <li style="font-size: 16px; font-weight: 500; list-style: none;">
                                            <%                                                  
                                            count = 0;
                                            for(let j =0; j<IJ.length; j++) { 
                                                str = '';
                                                if(IJ[j][1] == year[i]) {   
                                                    for(let k =3; k<IJ[j].length-5; k++) {
                                                        str += IJ[j][k] + ", "; 
                                                    }
                                                    str = regularExpression(str);
                                            %>
                                                    <%= count+1 + ". " + str%>
                                                    <br>
                                                    <h11><%="ISSN: " + IJ[j][8] + ", "%></h11>
                                                    <a href="<%=IJ[j][12]%>" target="_blank">
                                                        <%= IJ[j][12]%>
                                                    </a>
                                                    <% count++; %>
                                                    <br><br>
                                            <%  
                                                }                           
                                            }                               %>
                                            </li>
                                            <p style="font-size:20px;">&bull;&nbsp;<strong>Domestic Journal</strong></p>
                                            <li style="font-size: 16px; font-weight: 500; list-style: none;">
                                                <%                                                  
                                            count = 0;
                                            for(let j =0; j<DJ.length; j++) { 
                                                str = '';
                                                if(DJ[j][1] == year[i]) {   
                                                    for(let k =3; k<DJ[j].length-5; k++) {
                                                        str += DJ[j][k] + ", "; 
                                                    }
                                                    str = regularExpression(str);
                                            %>
                                                    <%= count+1 + ". " + str%>
                                                    <br>
                                                    <h11><%="ISSN: " + DJ[j][8] + ", "%></h11>
                                                    <a href="<%=DJ[j][12]%>" target="_blank">
                                                        <%= DJ[j][12]%>
                                                    </a>
                                                    <% count++; %>
                                                    <br><br>
                                            <%  
                                                }                           
                                            }                               %>
                                            </li>
                                            <p style="font-size:20px;">&bull;&nbsp;<strong>International Conference</strong></p>
                                            <li style="font-size: 16px; font-weight: 500; list-style: none;">
                                            <%                                                  
                                            count = 0;
                                            for(let j =0; j<IC.length; j++) { 
                                                str = '';
                                                if(IC[j][1] == year[i]) {   
                                                    for(let k =3; k<IC[j].length-2; k++) {
                                                        if(k == 3) {
                                                            str += IC[j][k].slice(0,11) + ", ";
                                                        } else {
                                                            str += IC[j][k] + ", ";
                                                        }
                                                    }
                                                    str = regularExpression(str);
                                                %>
                                                    <%= count+1 + ". " + str%>
                                                    <%  count++; %>
                                                    <br><br>
                                            <%
                                                }                           
                                            }                               %>
                                            </li>
                                            <p style="font-size:20px;">&bull;&nbsp;<strong>Domestic Conference</strong></p>
                                            <li style="font-size: 16px; font-weight: 500; list-style: none;">
                                                <%                                                 
                                            count = 0;
                                            for(let j =0; j<DC.length; j++) {  
                                                str = '';
                                                if(DC[j][1] == year[i]) {   
                                                    for(let k =3; k<DC[j].length-2; k++) {
                                                        if(k == 3) {
                                                            str += DC[j][k].slice(0,11) + ", ";
                                                        } else {
                                                            str += DC[j][k] + ", ";
                                                        }
                                                    }
                                                    str = regularExpression(str);
                                                %>
                                                    <%= count+1 + ". " + str%>
                                                    <%= ", " + DC[j][10]%>
                                                    <%  count++; %>
                                                    <br><br>
                                            <%
                                                }                           
                                            }                               %>
                                            </li>
                                        </div>
<%                                  }                                                   %>
<%                              }                                                       %>
                            </div>
                        </div>
                        <a href="#" class="top" style="position: fixed; left:95%; bottom:50px; display:none; font-size:30px; color:black">
                            <i class="fas fa-arrow-up"></i>
                        </a>
                    </div>
            </section>
        </aside>
        </div>
</body>

</html>